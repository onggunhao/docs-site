<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Atomic Swaps · Developers</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="# Atomic Swap"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Atomic Swaps · Developers"/><meta property="og:type" content="website"/><meta property="og:url" content="https://daniel.ai/docs-site/"/><meta property="og:description" content="# Atomic Swap"/><meta property="og:image" content="https://daniel.ai/docs-site/img/undraw_online.svg"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://daniel.ai/docs-site/img/undraw_tweetstorm.svg"/><link rel="shortcut icon" href="/docs-site/img/favicon.ico"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/solarized-dark.min.css"/><link rel="alternate" type="application/atom+xml" href="https://daniel.ai/docs-site/blog/atom.xml" title="Developers Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://daniel.ai/docs-site/blog/feed.xml" title="Developers Blog RSS Feed"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script src="/docs-site/js/scrollSpy.js"></script><link rel="stylesheet" href="/docs-site/css/main.css"/><script src="/docs-site/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/docs-site/"><img class="logo" src="/docs-site/img/logo.svg" alt="Developers"/><h2 class="headerTitleWithLogo">Developers</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/docs-site/docs/guides/intro/intro" target="_self">Guides</a></li><li class=""><a href="/docs-site/docs/api-reference/api-reference" target="_self">API Reference</a></li><li class=""><a href="/docs-site/docs/enduser/how-to-trade" target="_self">End User</a></li><li class=""><a href="/docs-site/blog/" target="_self">Blog</a></li><li class=""><a href="https://github.com/binance-chain/node-binary" target="_self">GitHub</a></li><li class=""><a target="_self"></a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Concepts</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Quickstart<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs-site/docs/guides/intro/intro">Introduction</a></li><li class="navListItem"><a class="navItem" href="/docs-site/docs/guides/intro/access">Accessing Binance Chain</a></li><li class="navListItem"><a class="navItem" href="/docs-site/docs/guides/intro/create-account">Create an Account</a></li><li class="navListItem"><a class="navItem" href="/docs-site/docs/guides/intro/make-transfer">Make a Transfer</a></li><li class="navListItem"><a class="navItem" href="/docs-site/docs/guides/intro/make-trade">Make a Trade</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Concepts<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs-site/docs/accounts">Accounts</a></li><li class="navListItem"><a class="navItem" href="/docs-site/docs/anti-front-running">Anti Front-Running</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/docs-site/docs/atomic-swap">Atomic Swaps</a></li><li class="navListItem"><a class="navItem" href="/docs-site/docs/blockchain">Blockchain Architecture</a></li><li class="navListItem"><a class="navItem" href="/docs-site/docs/encoding">Transaction Encoding</a></li><li class="navListItem"><a class="navItem" href="/docs-site/docs/exchange-integration">Exchange Integration</a></li><li class="navListItem"><a class="navItem" href="/docs-site/docs/faq">FAQ</a></li><li class="navListItem"><a class="navItem" href="/docs-site/docs/governance">Governance</a></li><li class="navListItem"><a class="navItem" href="/docs-site/docs/keys">Keys</a></li><li class="navListItem"><a class="navItem" href="/docs-site/docs/list">List</a></li><li class="navListItem"><a class="navItem" href="/docs-site/docs/match">Matching Logic</a></li><li class="navListItem"><a class="navItem" href="/docs-site/docs/match-examples">Matching Examples</a></li><li class="navListItem"><a class="navItem" href="/docs-site/docs/memo-validation">Memo Validation</a></li><li class="navListItem"><a class="navItem" href="/docs-site/docs/offline">Offline</a></li><li class="navListItem"><a class="navItem" href="/docs-site/docs/timelock">Timelock</a></li><li class="navListItem"><a class="navItem" href="/docs-site/docs/tokens">Tokens</a></li><li class="navListItem"><a class="navItem" href="/docs-site/docs/trade">Trade</a></li><li class="navListItem"><a class="navItem" href="/docs-site/docs/trading-spec">Trading Spec</a></li><li class="navListItem"><a class="navItem" href="/docs-site/docs/transfer">Transfers</a></li><li class="navListItem"><a class="navItem" href="/docs-site/docs/tss">Threshold Signatures</a></li><li class="navListItem"><a class="navItem" href="/docs-site/docs/guides/concepts/architecture">Architecture</a></li><li class="navListItem"><a class="navItem" href="/docs-site/docs/guides/concepts/assets">Assets</a></li><li class="navListItem"><a class="navItem" href="/docs-site/docs/guides/concepts/matching-engine">Matching Engine</a></li><li class="navListItem"><a class="navItem" href="/docs-site/docs/guides/concepts/cross-chain-atomic-swaps">Cross-chain Atomic Swaps</a></li><li class="navListItem"><a class="navItem" href="/docs-site/docs/guides/concepts/threshold-signature-scheme">Threshold Signature Scheme</a></li><li class="navListItem"><a class="navItem" href="/docs-site/docs/guides/concepts/fees">Fees</a></li><li class="navListItem"><a class="navItem" href="/docs-site/docs/guides/concepts/governance">Governance</a></li><li class="navListItem"><a class="navItem" href="/docs-site/docs/guides/concepts/encoding">Encoding</a></li><li class="navListItem"><a class="navItem" href="/docs-site/docs/walletconnect">WalletConnect</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Run a node<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs-site/docs/fullnode">Full Node</a></li><li class="navListItem"><a class="navItem" href="/docs-site/docs/fullnodeissues">Full Node Issues</a></li><li class="navListItem"><a class="navItem" href="/docs-site/docs/extra-data-from-fullnode">Get Extra Data from Full Node</a></li><li class="navListItem"><a class="navItem" href="/docs-site/docs/light-client">Light Client</a></li><li class="navListItem"><a class="navItem" href="/docs-site/docs/guides/node/nodetypes">Types of Nodes</a></li><li class="navListItem"><a class="navItem" href="/docs-site/docs/guides/node/fullnode">Run a Full Node</a></li><li class="navListItem"><a class="navItem" href="/docs-site/docs/guides/node/lightnode">Light Node</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 id="__docusaurus" class="postHeaderTitle">Atomic Swaps</h1></header><article><div><span><h1><a class="anchor" aria-hidden="true" id="atomic-swap"></a><a href="#atomic-swap" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Atomic Swap</h1>
<ul>
<li><a href="#atomic-swap">Atomic Swap</a>
<ul>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#commands">Commands</a>
<ul>
<li><a href="#hash-timer-locked-transfer">Hash Timer Locked Transfer</a></li>
<li><a href="#deposit-htlt">Deposit HTLT</a></li>
<li><a href="#claim-htlt">Claim HTLT</a></li>
</ul>
<ul>
<li><a href="#refund-htlt">Refund HTLT</a></li>
<li><a href="#query-atomic-swap">Query Atomic Swap</a></li>
<li><a href="#query-atomic-swap-id-by-recipient">Query Atomic Swap ID By Recipient</a></li>
<li><a href="#query-atomic-swap-id-by-creator">Query Atomic Swap ID By Creator</a></li>
</ul></li>
<li><a href="#fees">Fees</a></li>
<li><a href="#workflows">Workflows</a>
<ul>
<li><a href="#preparations">Preparations</a>
<ul>
<li><a href="#swap-tokens-from-ethereum-to-binance-chain">Swap Tokens from Ethereum to Binance Chain</a></li>
</ul>
<ul>
<li><a href="#1--approve-swap-transaction">1. Approve Swap Transaction</a></li>
<li><a href="#2-call--htlt--function-from-ethereum">2. Call <code>HTLT</code> function From Ethereum</a></li>
<li><a href="#3-deputy-call-htlt-on-binance-chain">3. Deputy Call HTLT on Binance Chain</a></li>
<li><a href="#4-claim-htlt-on-binance-chain">4. Claim HTLT on Binance Chain</a></li>
<li><a href="#5-deputy-claim-erc20-token">5. Deputy Claim ERC20 Token</a></li>
<li><a href="#6-demo-for-client-app-swap-erc20-to-bep2">6. Client Javascript demo: swap erc20 to bep2</a></li>
</ul></li>
<li><a href="#swap-tokens-from-binance-chain-to-ethereum">Swap Tokens from Binance Chain to Ethereum</a>
<ul>
<li><a href="#1-send--htlt--transaction-from-binance-chain">1. Send <code>HTLT</code> Transaction from Binance Chain</a></li>
<li><a href="#2--deputy-approve-tokens">2. Deputy Approve Tokens</a></li>
<li><a href="#3-deputy-send-htlt-on-ethereum">3. Deputy Send HTLT on Ethereum</a></li>
<li><a href="#4-claim-erc20-tokens-on-ethereum">4. Claim ERC20 Tokens on Ethereum</a></li>
<li><a href="#5-deputy-claim-on-binance-chain">5. Deputy Claim on Binance Chain</a></li>
<li><a href="#6-demo-for-client-app-swap-bep2-to-erc20">6. Client Javascript demo: swap bep2 to erc20</a></li>
</ul></li>
<li><a href="#swap-between-several-bep2-tokens">Swap between Several BEP2 tokens</a></li>
<li><a href="#swap-between-several-bep2-tokens-fails">Swap between Several BEP2 tokens fails</a></li>
</ul></li>
</ul></li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="introduction"></a><a href="#introduction" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Introduction</h2>
<p>As explained in <a href="https://github.com/binance-chain/BEPs/blob/master/BEP3.md">BEP3</a>, Hash Timer Locked Contract(HTLC) has been used for Atomic Swap and cross payment channels between different blockchains. BEP3 defines native transactions to support HTLC on Binance Chain and also proposes the standard infrastructure and procedure to use HTLC for inter-chain atomic swap to easily create and use pegged token.
During the swap process, the related fund will be locked to a purely-code-controlled escrow account.
A purely-code-controlled escrow account is a kind of account which is derived from a hard-coded string in binance chain protocol. This kind of account has no its own private key and it's only controled by code in protocol. The code for calculating escrow account is the same as how it's done in <a href="https://github.com/cosmos/cosmos-sdk/blob/82a2c5d6d86ffd761f0162b93f0aaa57b7f66fe7/x/supply/internal/types/account.go#L40">cosmos-sdk</a>:</p>
<pre><code class="hljs">AtomicSwapCoinsAccAddr = sdk.<span class="hljs-constructor">AccAddress(<span class="hljs-params">crypto</span>.AddressHash([]<span class="hljs-params">byte</span>(<span class="hljs-string">"BinanceChainAtomicSwapCoins"</span>)</span>))
</code></pre>
<p>The account for mainnet is: <strong>bnb1wxeplyw7x8aahy93w96yhwm7xcq3ke4f8ge93u</strong> and the account for testnet is: <strong>tbnb1wxeplyw7x8aahy93w96yhwm7xcq3ke4ffasp3d</strong>. Once the swap is claimed or refunded, the fund will be transfered from the purely-code-controlled escrow account to client accounts.</p>
<h2><a class="anchor" aria-hidden="true" id="commands"></a><a href="#commands" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Commands</h2>
<h3><a class="anchor" aria-hidden="true" id="hash-timer-locked-transfer"></a><a href="#hash-timer-locked-transfer" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Hash Timer Locked Transfer</h3>
<p>Hash Timer Locked Transfer (HTLT) is a new transaction type on Binance Chain, to serve as HTLC in the first step of Atomic Swap,</p>
<h4><a class="anchor" aria-hidden="true" id="parameters"></a><a href="#parameters" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Parameters</h4>
<table>
<thead>
<tr><th>Name</th><th>Type</th><th>Description</th><th>Optional</th></tr>
</thead>
<tbody>
<tr><td>From</td><td>Address</td><td>Sender address, where the asset is from</td><td>No</td></tr>
<tr><td>recipient-addr</td><td>Address</td><td>Receiver address, where the asset is to, if the proper condition meets.</td><td>No</td></tr>
<tr><td>recipient-other-chain</td><td>bytes</td><td>a byte array, maximum 32 bytes, in any proper encoding. leave it empty for single chain swap</td><td>Yes</td></tr>
<tr><td>sender-other-chain</td><td>bytes</td><td>a byte array, maximum 32 bytes, in any proper encoding. leave it empty for single chain swap</td><td>Yes</td></tr>
<tr><td>RandomNumberHash</td><td>32 bytes</td><td>hash of a random number and timestamp, based on SHA256. If left out, a random value will be generated</td><td>True</td></tr>
<tr><td>Timestamp</td><td>int64</td><td>Supposed to be the time of sending transaction, counted by second. It should be identical to the one in swap contract. If left out, current timestamp will be used.</td><td>No</td></tr>
<tr><td>OutAmount</td><td>Coins</td><td>similar to the Coins in the original Transfer defined in BEP2, assets to swap out</td><td>No</td></tr>
<tr><td>ExpectedIncome</td><td>string</td><td>Expected income from swap counter party, example: &quot;100:BNB&quot; or &quot;100:BNB,10000:BTCB-1DE&quot; The amount needs to be bumped by e^8</td><td>No</td></tr>
<tr><td>HeightSpan</td><td>int64</td><td>number of blocks to wait before the asset may be returned to From if not claimed via Random. The number must be larger than or equal to 360 (&gt;2 minutes), and smaller than 518400 (&lt; 48 hours)</td><td>No</td></tr>
<tr><td>CrossChain</td><td>bool</td><td>Specify if the HTLT is for cross chain atomic swap</td><td>True, the default value is False</td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="outputs"></a><a href="#outputs" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Outputs</h4>
<table>
<thead>
<tr><th>Name</th><th>Type</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>Random number</td><td>32 bytes</td><td></td></tr>
<tr><td>Timestamp</td><td>int64</td><td></td></tr>
<tr><td>Random number hash</td><td>32 bytes</td><td></td></tr>
<tr><td>Swap ID</td><td>32 bytes</td><td></td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="examples"></a><a href="#examples" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Examples</h4>
<ol>
<li>Swap between BEP2 tokens</li>
</ol>
<ul>
<li>On <em>testnet</em>:</li>
</ul>
<p>Command line</p>
<pre><code class="hljs css language-shell">./tbnbcli token HTLT --recipient-addr &lt;recipient-addr&gt; --amount 100:BNB --expected-income &lt;expectedIncome&gt; --height-span &lt;heightSpan&gt; --from &lt;from-addr&gt; --chain-id Binance-Chain-Nile --trust-node --node http://data-seed-pre-0-s3.binance.org:80
</code></pre>
<p>Javascript</p>
<pre><code class="hljs css language-javascript"><span class="hljs-keyword">const</span> client = <span class="hljs-keyword">new</span> BncClient(<span class="hljs-string">"https://testnet-dex.binance.org"</span>);
<span class="hljs-keyword">const</span> privateKey = crypto.getPrivateKeyFromMnemonic(mnemonic);
client.setPrivateKey(privateKey);
<span class="hljs-keyword">const</span> <span class="hljs-keyword">from</span> = <span class="hljs-string">"tbnb1hgm0p7khfk85zpz5v0j8wnej3a90w709zzlffd"</span>; <span class="hljs-comment">// sender address</span>
<span class="hljs-keyword">const</span> recipient = <span class="hljs-string">"tbnb1prrujx8kkukrcrppklggadhuvegfnx8pemsq77"</span>; <span class="hljs-comment">// recipient address</span>
<span class="hljs-keyword">const</span> randomNumber =
  <span class="hljs-string">"e8eae926261ab77d018202434791a335249b470246a7b02e28c3b2fb6ffad8f3"</span>; <span class="hljs-comment">// 32 bytes random number</span>
<span class="hljs-keyword">const</span> timestamp = <span class="hljs-built_in">Math</span>.floor(<span class="hljs-built_in">Date</span>.now() / <span class="hljs-number">1000</span>); <span class="hljs-comment">// take the current timestamp</span>
<span class="hljs-keyword">const</span> randomNumberHash = calculateRandomNumberHash(randomNumber, timestamp);
<span class="hljs-keyword">const</span> amount = [
  {
    <span class="hljs-attr">denom</span>: <span class="hljs-string">"BNB"</span>,
    <span class="hljs-attr">amount</span>: <span class="hljs-number">100</span>
  }
];
<span class="hljs-keyword">const</span> expectedIncome = <span class="hljs-string">"100:BNB"</span>; <span class="hljs-comment">// expected income</span>
<span class="hljs-keyword">const</span> heightSpan = <span class="hljs-number">400</span>; <span class="hljs-comment">// height span</span>
<span class="hljs-keyword">const</span> res = client.swap.HTLT(
  <span class="hljs-keyword">from</span>,
  recipient,
  <span class="hljs-string">""</span>,
  <span class="hljs-string">""</span>,
  randomNumberHash,
  timestamp,
  amount,
  expectedIncome,
  heightSpan,
  <span class="hljs-literal">false</span>
);
</code></pre>
<p><strong>Example output:</strong></p>
<p>Please take a note of returned <code>swapID</code>:</p>
<pre><code class="hljs">Random number: <span class="hljs-number">927</span>c1ac33100bdbb001de19c626a05a7c3c11304fc825f5eabb22e741507711b
Timestamp: <span class="hljs-number">1568792486</span>
Random number hash: <span class="hljs-number">5768702259</span>ee55983378d7b8207890c666648264524b9dada551386f832ba6b1
Password to sign with <span class="hljs-string">'guest'</span>:
Committed at block <span class="hljs-number">39984169</span> (
tx hash: B5A3DD92A40E98745BBE9F608944FE5511B81071B34E9947A754A04A5F378A85,
response: {
    Code:<span class="hljs-number">0</span>
    Data:[<span class="hljs-number">77</span> <span class="hljs-number">137</span> <span class="hljs-number">139</span> <span class="hljs-number">200</span> <span class="hljs-number">85</span> <span class="hljs-number">141</span> <span class="hljs-number">170</span> <span class="hljs-number">77</span> <span class="hljs-number">129</span> <span class="hljs-number">116</span> <span class="hljs-number">134</span> <span class="hljs-number">215</span> <span class="hljs-number">169</span> <span class="hljs-number">59</span> <span class="hljs-number">119</span> <span class="hljs-number">178</span> <span class="hljs-number">200</span> <span class="hljs-number">47</span> <span class="hljs-number">206</span> <span class="hljs-number">194</span> <span class="hljs-number">18</span> <span class="hljs-number">58</span> <span class="hljs-number">191</span> <span class="hljs-number">74</span> <span class="hljs-number">30</span> <span class="hljs-number">183</span> <span class="hljs-number">210</span> <span class="hljs-number">82</span> <span class="hljs-number">18</span> <span class="hljs-number">55</span> <span class="hljs-number">236</span> <span class="hljs-number">205</span>]
    Log:Msg <span class="hljs-number">0</span>: swapID: <span class="hljs-number">4</span>d898bc8558daa4d817486d7a93b77b2c82fcec2123abf4a1eb7d2521237eccd
    Info: GasWanted:<span class="hljs-number">0</span> GasUsed:<span class="hljs-number">0</span>
    ...
)
</code></pre>
<p>Besides, the <code>Data</code> field in the committed result is the byte array of <code>swapID</code>:</p>
<pre><code class="hljs">Data:[<span class="hljs-number">77</span> <span class="hljs-number">137</span> <span class="hljs-number">139</span> <span class="hljs-number">200</span> <span class="hljs-number">85</span> <span class="hljs-number">141</span> <span class="hljs-number">170</span> <span class="hljs-number">77</span> <span class="hljs-number">129</span> <span class="hljs-number">116</span> <span class="hljs-number">134</span> <span class="hljs-number">215</span> <span class="hljs-number">169</span> <span class="hljs-number">59</span> <span class="hljs-number">119</span> <span class="hljs-number">178</span> <span class="hljs-number">200</span> <span class="hljs-number">47</span> <span class="hljs-number">206</span> <span class="hljs-number">194</span> <span class="hljs-number">18</span> <span class="hljs-number">58</span> <span class="hljs-number">191</span> <span class="hljs-number">74</span> <span class="hljs-number">30</span> <span class="hljs-number">183</span> <span class="hljs-number">210</span> <span class="hljs-number">82</span> <span class="hljs-number">18</span> <span class="hljs-number">55</span> <span class="hljs-number">236</span> <span class="hljs-number">205</span>]

swapID: <span class="hljs-number">4</span>d898bc8558daa4d817486d7a93b77b2c82fcec2123abf4a1eb7d2521237eccd
</code></pre>
<ol start="2">
<li>Swap from Binance Chain to Ethereum</li>
</ol>
<ul>
<li>Clients send HTLT on Binance Chain on <em>testnet</em>:</li>
</ul>
<p>Command line:</p>
<pre><code class="hljs css language-shell">./tbnbcli token HTLT --from &lt;from-addr&gt; --chain-id Binance-Chain-Nile  --height-span &lt;heightSpan&gt; --amount &lt;amount&gt; --expected-income &lt;expectedIncome&gt; --recipient-addr &lt;deputy-bep2-addr&gt;  --recipient-other-chain &lt;client ethereum address&gt;  --cross-chain --trust-node --node http://data-seed-pre-0-s3.binance.org:80
</code></pre>
<p>Javascript:</p>
<pre><code class="hljs css language-javascript"><span class="hljs-keyword">const</span> client = <span class="hljs-keyword">new</span> BncClient(<span class="hljs-string">"https://testnet-dex.binance.org"</span>);
<span class="hljs-keyword">const</span> privateKey = crypto.getPrivateKeyFromMnemonic(mnemonic);
client.setPrivateKey(privateKey);
<span class="hljs-keyword">const</span> <span class="hljs-keyword">from</span> = <span class="hljs-string">"tbnb1hgm0p7khfk85zpz5v0j8wnej3a90w709zzlffd"</span>; <span class="hljs-comment">// sender address</span>
<span class="hljs-keyword">const</span> recipient = <span class="hljs-string">"tbnb1prrujx8kkukrcrppklggadhuvegfnx8pemsq77"</span>; <span class="hljs-comment">// recipient address</span>
<span class="hljs-keyword">const</span> recipientOtherChain = <span class="hljs-string">"0x37B8516a0F88E65D677229b402ec6C1e0E333004"</span>; <span class="hljs-comment">//client ethereum address</span>
<span class="hljs-keyword">const</span> randomNumber =
  <span class="hljs-string">"e8eae926261ab77d018202434791a335249b470246a7b02e28c3b2fb6ffad8f3"</span>; <span class="hljs-comment">// 32 bytes random number</span>
<span class="hljs-keyword">const</span> timestamp = <span class="hljs-built_in">Math</span>.floor(<span class="hljs-built_in">Date</span>.now() / <span class="hljs-number">1000</span>); <span class="hljs-comment">// take the current timestamp</span>
<span class="hljs-keyword">const</span> randomNumberHash = calculateRandomNumberHash(randomNumber, timestamp);
<span class="hljs-keyword">const</span> amount = [
  {
    <span class="hljs-attr">denom</span>: <span class="hljs-string">"BNB"</span>,
    <span class="hljs-attr">amount</span>: <span class="hljs-number">100</span>
  }
]; <span class="hljs-comment">// swap out token amount</span>
<span class="hljs-keyword">const</span> expectedIncome = <span class="hljs-string">"100:BNB"</span>; <span class="hljs-comment">// expected income</span>
<span class="hljs-keyword">const</span> heightSpan = <span class="hljs-number">400</span>; <span class="hljs-comment">// height span</span>
<span class="hljs-keyword">const</span> res = client.swap.HTLT(
  <span class="hljs-keyword">from</span>,
  recipient,
  recipientOtherChain,
  <span class="hljs-string">""</span>,
  randomNumberHash,
  timestamp,
  amount,
  expectedIncome,
  heightSpan,
  <span class="hljs-literal">true</span>
);
</code></pre>
<ol start="3">
<li>Swap from Ethereum to Binance Chain</li>
</ol>
<blockquote>
<p>Note: Once cross-chain is true, --recipient-other-chain must not be empty</p>
</blockquote>
<ul>
<li>Deputy send HTLT on Binance Chain on <em>testnet</em>:</li>
</ul>
<p>Command line:</p>
<pre><code class="hljs css language-shell">./tbnbcli token HTLT --from  &lt;from-addr&gt; --chain-id Binance-Chain-Nile --height-span  &lt;heightSpan&gt;  --amount &lt;amount&gt; --expected-income &lt;expectedIncome&gt; --recipient-other-chain &lt;deputy ethereum address&gt; --sender-other-chain &lt;client ethereum address&gt; --recipient-addr &lt;client bep2 address&gt; --cross-chain --trust-node --node http://data-seed-pre-0-s3.binance.org:80
</code></pre>
<p>Javascript:</p>
<pre><code class="hljs css language-javascript"><span class="hljs-keyword">const</span> client = <span class="hljs-keyword">new</span> BncClient(<span class="hljs-string">"https://testnet-dex.binance.org"</span>);
<span class="hljs-keyword">const</span> privateKey = crypto.getPrivateKeyFromMnemonic(mnemonic);
client.setPrivateKey(privateKey);
<span class="hljs-keyword">const</span> <span class="hljs-keyword">from</span> = <span class="hljs-string">"tbnb1hgm0p7khfk85zpz5v0j8wnej3a90w709zzlffd"</span>; <span class="hljs-comment">// sender address</span>
<span class="hljs-keyword">const</span> recipient = <span class="hljs-string">"tbnb1prrujx8kkukrcrppklggadhuvegfnx8pemsq77"</span>; <span class="hljs-comment">// recipient address</span>
<span class="hljs-keyword">const</span> recipientOtherChain = <span class="hljs-string">"0xfA5E36a04EeF3152092099F352DDbe88953bB540"</span>; <span class="hljs-comment">//client ethereum address</span>
<span class="hljs-keyword">const</span> senderOtherChain = <span class="hljs-string">"0x37B8516a0F88E65D677229b402ec6C1e0E333004"</span>; <span class="hljs-comment">//client ethereum address</span>
<span class="hljs-keyword">const</span> randomNumberHash =
  <span class="hljs-string">"6632eda86c4f19190c8a986e188526eee865e1ce2758ba59c8bf45e20ffa3bb5"</span>; <span class="hljs-comment">//deputy get this value from the event log of swap contract</span>
<span class="hljs-keyword">const</span> timestamp = <span class="hljs-number">1571383800</span>; <span class="hljs-comment">//deputy get this value from the event log of swap contract</span>
<span class="hljs-keyword">const</span> amount = [
  {
    <span class="hljs-attr">denom</span>: <span class="hljs-string">"BNB"</span>,
    <span class="hljs-attr">amount</span>: <span class="hljs-number">100</span>
  }
]; <span class="hljs-comment">// swap out token amount</span>
<span class="hljs-keyword">const</span> expectedIncome = <span class="hljs-string">"100:BNB"</span>; <span class="hljs-comment">// expected income</span>
<span class="hljs-keyword">const</span> heightSpan = <span class="hljs-number">400</span>; <span class="hljs-comment">// height span</span>
<span class="hljs-keyword">const</span> res = client.swap.HTLT(
  <span class="hljs-keyword">from</span>,
  recipient,
  recipientOtherChain,
  senderOtherChain,
  randomNumberHash,
  timestamp,
  amount,
  expectedIncome,
  heightSpan,
  <span class="hljs-literal">true</span>
);
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="deposit-htlt"></a><a href="#deposit-htlt" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Deposit HTLT</h3>
<p>Deposit Hash Timer Locked Transfer is to lock new BEP2 asset to an existed HTLT which is for single chain atomic swap.</p>
<h4><a class="anchor" aria-hidden="true" id="parameters-1"></a><a href="#parameters-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Parameters</h4>
<table>
<thead>
<tr><th>Name</th><th>Type</th><th>Description</th><th>Optional</th></tr>
</thead>
<tbody>
<tr><td>From</td><td>Address</td><td>Sender address, where the assets are from</td><td>No</td></tr>
<tr><td>SwapID</td><td>32 bytes</td><td>ID of previously created swap, hex encoding</td><td>No</td></tr>
<tr><td>Amount</td><td>Coins</td><td>The swapped out amount BEP2 tokens, example: &quot;100:BNB&quot; or &quot;100:BNB,10000:BTCB-1DE&quot;</td><td>No</td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="examples-1"></a><a href="#examples-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Examples</h4>
<ul>
<li>On testnet:</li>
</ul>
<p>Command line:</p>
<pre><code class="hljs css language-shell">./tbnbcli token deposit --swap-id &lt;swapID&gt;  --amount 10000:TEST-599 --from &lt;from-key&gt; --chain-id Binance-Chain-Nile --trust-node --node http://data-seed-pre-0-s3.binance.org:80
</code></pre>
<p>Javascript:</p>
<pre><code class="hljs css language-javascript"><span class="hljs-keyword">const</span> client = <span class="hljs-keyword">new</span> BncClient(<span class="hljs-string">"https://testnet-dex.binance.org"</span>);
<span class="hljs-keyword">const</span> privateKey = crypto.getPrivateKeyFromMnemonic(mnemonic);
client.setPrivateKey(privateKey);
<span class="hljs-keyword">const</span> <span class="hljs-keyword">from</span> = <span class="hljs-string">"tbnb1hgm0p7khfk85zpz5v0j8wnej3a90w709zzlffd"</span>; <span class="hljs-comment">// sender address</span>
<span class="hljs-keyword">const</span> swapID =
  <span class="hljs-string">"61daf59e977c5f718f5aaedeaf69ccbea1c376db5274a84bca88848696164ffe"</span>; <span class="hljs-comment">// the ID of an existing swap</span>
<span class="hljs-keyword">const</span> amount = [
  {
    <span class="hljs-attr">denom</span>: <span class="hljs-string">"TEST-599"</span>,
    <span class="hljs-attr">amount</span>: <span class="hljs-number">10000</span>
  }
];
<span class="hljs-keyword">const</span> res = client.swap.depositHTLT(<span class="hljs-keyword">from</span>, swapID, amount);
</code></pre>
<p>Example output</p>
<pre><code class="hljs">Committed at block <span class="hljs-number">39984686</span> (tx hash: AA118F7CFCB3FFF86EF5EED8D2B9ADEAC5D9F242497910DAA232BDE5F6A84C1E, response: {Code:<span class="hljs-number">0</span> Data:[] Log:Msg <span class="hljs-number">0</span>:  Info: GasWanted:<span class="hljs-number">0</span> GasUsed:<span class="hljs-number">0</span> Tags:[{Key:[<span class="hljs-number">115</span> <span class="hljs-number">101</span> <span class="hljs-number">110</span> <span class="hljs-number">100</span> <span class="hljs-number">101</span> <span class="hljs-number">114</span>] Value:[<span class="hljs-number">116</span> <span class="hljs-number">98</span> <span class="hljs-number">110</span> <span class="hljs-number">98</span> <span class="hljs-number">49</span> <span class="hljs-number">110</span> <span class="hljs-number">107</span> <span class="hljs-number">120</span> <span class="hljs-number">57</span> <span class="hljs-number">57</span> <span class="hljs-number">52</span> <span class="hljs-number">113</span> <span class="hljs-number">118</span> <span class="hljs-number">113</span> <span class="hljs-number">109</span> <span class="hljs-number">113</span> <span class="hljs-number">103</span> <span class="hljs-number">107</span> <span class="hljs-number">53</span> <span class="hljs-number">55</span> <span class="hljs-number">118</span> <span class="hljs-number">103</span> <span class="hljs-number">117</span> <span class="hljs-number">113</span> <span class="hljs-number">104</span> <span class="hljs-number">54</span> <span class="hljs-number">122</span> <span class="hljs-number">106</span> <span class="hljs-number">108</span> <span class="hljs-number">97</span> <span class="hljs-number">99</span> <span class="hljs-number">113</span> <span class="hljs-number">122</span> <span class="hljs-number">120</span> <span class="hljs-number">100</span> <span class="hljs-number">107</span> <span class="hljs-number">117</span> <span class="hljs-number">101</span> <span class="hljs-number">53</span> <span class="hljs-number">122</span> <span class="hljs-number">106</span> <span class="hljs-number">121</span> <span class="hljs-number">120</span>] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:<span class="hljs-number">0</span>} {Key:[<span class="hljs-number">114</span> <span class="hljs-number">101</span> <span class="hljs-number">99</span> <span class="hljs-number">105</span> <span class="hljs-number">112</span> <span class="hljs-number">105</span> <span class="hljs-number">101</span> <span class="hljs-number">110</span> <span class="hljs-number">116</span>] Value:[<span class="hljs-number">116</span> <span class="hljs-number">98</span> <span class="hljs-number">110</span> <span class="hljs-number">98</span> <span class="hljs-number">49</span> <span class="hljs-number">119</span> <span class="hljs-number">120</span> <span class="hljs-number">101</span> <span class="hljs-number">112</span> <span class="hljs-number">108</span> <span class="hljs-number">121</span> <span class="hljs-number">119</span> <span class="hljs-number">55</span> <span class="hljs-number">120</span> <span class="hljs-number">56</span> <span class="hljs-number">97</span> <span class="hljs-number">97</span> <span class="hljs-number">104</span> <span class="hljs-number">121</span> <span class="hljs-number">57</span> <span class="hljs-number">51</span> <span class="hljs-number">119</span> <span class="hljs-number">57</span> <span class="hljs-number">54</span> <span class="hljs-number">121</span> <span class="hljs-number">104</span> <span class="hljs-number">119</span> <span class="hljs-number">109</span> <span class="hljs-number">55</span> <span class="hljs-number">120</span> <span class="hljs-number">99</span> <span class="hljs-number">113</span> <span class="hljs-number">51</span> <span class="hljs-number">107</span> <span class="hljs-number">101</span> <span class="hljs-number">52</span> <span class="hljs-number">102</span> <span class="hljs-number">102</span> <span class="hljs-number">97</span> <span class="hljs-number">115</span> <span class="hljs-number">112</span> <span class="hljs-number">51</span> <span class="hljs-number">100</span>] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:<span class="hljs-number">0</span>} {Key:[<span class="hljs-number">97</span> <span class="hljs-number">99</span> <span class="hljs-number">116</span> <span class="hljs-number">105</span> <span class="hljs-number">111</span> <span class="hljs-number">110</span>] Value:[<span class="hljs-number">100</span> <span class="hljs-number">101</span> <span class="hljs-number">112</span> <span class="hljs-number">111</span> <span class="hljs-number">115</span> <span class="hljs-number">105</span> <span class="hljs-number">116</span> <span class="hljs-number">72</span> <span class="hljs-number">84</span> <span class="hljs-number">76</span> <span class="hljs-number">84</span>] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:<span class="hljs-number">0</span>}] Codespace: XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:<span class="hljs-number">0</span>})
</code></pre>
<p>After the deposit, you may observe that the balance of sender is decreased. The amount in deposit transaction must be positive. Besides, you can query the swap by <code>swapID</code> and the <code>in_amount</code> must equal to the amount that you balance decreased.</p>
<h3><a class="anchor" aria-hidden="true" id="claim-htlt"></a><a href="#claim-htlt" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Claim HTLT</h3>
<p>Claim Hash Timer Locked Transfer is to claim the locked asset by showing the random number value that matches the hash. Each HTLT locked asset is guaranteed to be release once.</p>
<h4><a class="anchor" aria-hidden="true" id="parameters-2"></a><a href="#parameters-2" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Parameters</h4>
<table>
<thead>
<tr><th>Name</th><th>Type</th><th>Description</th><th>Optional</th></tr>
</thead>
<tbody>
<tr><td>From</td><td>Address</td><td>Sender address</td><td>No</td></tr>
<tr><td>SwapID</td><td>32 bytes</td><td>ID of previously created swap, hex encoding</td><td>No</td></tr>
<tr><td>RandomNumber</td><td>32 bytes</td><td>The random number to unlock the locked hash, 32 bytes, hex encoding</td><td>No</td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="examples-2"></a><a href="#examples-2" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Examples</h4>
<ul>
<li>On testnet:</li>
</ul>
<p>Command line:</p>
<pre><code class="hljs css language-shell">./tbnbcli token claim --swap-id  &lt;swapID&gt; --random-number &lt;random-number&gt; --from &lt;from-key&gt; --chain-id Binance-Chain-Nile --trust-node --node http://data-seed-pre-0-s3.binance.org:80
</code></pre>
<p>Javascript:</p>
<pre><code class="hljs css language-javascript"><span class="hljs-keyword">const</span> client = <span class="hljs-keyword">new</span> BncClient(<span class="hljs-string">"https://testnet-dex.binance.org"</span>);
<span class="hljs-keyword">const</span> privateKey = crypto.getPrivateKeyFromMnemonic(mnemonic);
client.setPrivateKey(privateKey);
<span class="hljs-keyword">const</span> swapID =
  <span class="hljs-string">"61daf59e977c5f718f5aaedeaf69ccbea1c376db5274a84bca88848696164ffe"</span>; <span class="hljs-comment">// the ID of an existing swap</span>
<span class="hljs-keyword">const</span> randomNumber =
  <span class="hljs-string">"e8eae926261ab77d018202434791a335249b470246a7b02e28c3b2fb6ffad8f3"</span>; <span class="hljs-comment">// the random number generated in htlt</span>
<span class="hljs-keyword">const</span> res = client.swap.claimHTLT(<span class="hljs-keyword">from</span>, swapID, randomNumber);
</code></pre>
<p>Example output:</p>
<pre><code class="hljs">Committed at block <span class="hljs-number">39984971</span> (tx hash: <span class="hljs-number">15</span>B8625E0247DE54700D3C5C110BE0CE279D33CC13A73845F3E0305758A40902, response: {Code:<span class="hljs-number">0</span> Data:[] Log:Msg <span class="hljs-number">0</span>:  Info: GasWanted:<span class="hljs-number">0</span> GasUsed:<span class="hljs-number">0</span> Tags:[{Key:[<span class="hljs-number">115</span> <span class="hljs-number">101</span> <span class="hljs-number">110</span> <span class="hljs-number">100</span> <span class="hljs-number">101</span> <span class="hljs-number">114</span>] Value:[<span class="hljs-number">116</span> <span class="hljs-number">98</span> <span class="hljs-number">110</span> <span class="hljs-number">98</span> <span class="hljs-number">49</span> <span class="hljs-number">119</span> <span class="hljs-number">120</span> <span class="hljs-number">101</span> <span class="hljs-number">112</span> <span class="hljs-number">108</span> <span class="hljs-number">121</span> <span class="hljs-number">119</span> <span class="hljs-number">55</span> <span class="hljs-number">120</span> <span class="hljs-number">56</span> <span class="hljs-number">97</span> <span class="hljs-number">97</span> <span class="hljs-number">104</span> <span class="hljs-number">121</span> <span class="hljs-number">57</span> <span class="hljs-number">51</span> <span class="hljs-number">119</span> <span class="hljs-number">57</span> <span class="hljs-number">54</span> <span class="hljs-number">121</span> <span class="hljs-number">104</span> <span class="hljs-number">119</span> <span class="hljs-number">109</span> <span class="hljs-number">55</span> <span class="hljs-number">120</span> <span class="hljs-number">99</span> <span class="hljs-number">113</span> <span class="hljs-number">51</span> <span class="hljs-number">107</span> <span class="hljs-number">101</span> <span class="hljs-number">52</span> <span class="hljs-number">102</span> <span class="hljs-number">102</span> <span class="hljs-number">97</span> <span class="hljs-number">115</span> <span class="hljs-number">112</span> <span class="hljs-number">51</span> <span class="hljs-number">100</span>] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:<span class="hljs-number">0</span>} {Key:[<span class="hljs-number">114</span> <span class="hljs-number">101</span> <span class="hljs-number">99</span> <span class="hljs-number">105</span> <span class="hljs-number">112</span> <span class="hljs-number">105</span> <span class="hljs-number">101</span> <span class="hljs-number">110</span> <span class="hljs-number">116</span>] Value:[<span class="hljs-number">116</span> <span class="hljs-number">98</span> <span class="hljs-number">110</span> <span class="hljs-number">98</span> <span class="hljs-number">49</span> <span class="hljs-number">110</span> <span class="hljs-number">107</span> <span class="hljs-number">120</span> <span class="hljs-number">57</span> <span class="hljs-number">57</span> <span class="hljs-number">52</span> <span class="hljs-number">113</span> <span class="hljs-number">118</span> <span class="hljs-number">113</span> <span class="hljs-number">109</span> <span class="hljs-number">113</span> <span class="hljs-number">103</span> <span class="hljs-number">107</span> <span class="hljs-number">53</span> <span class="hljs-number">55</span> <span class="hljs-number">118</span> <span class="hljs-number">103</span> <span class="hljs-number">117</span> <span class="hljs-number">113</span> <span class="hljs-number">104</span> <span class="hljs-number">54</span> <span class="hljs-number">122</span> <span class="hljs-number">106</span> <span class="hljs-number">108</span> <span class="hljs-number">97</span> <span class="hljs-number">99</span> <span class="hljs-number">113</span> <span class="hljs-number">122</span> <span class="hljs-number">120</span> <span class="hljs-number">100</span> <span class="hljs-number">107</span> <span class="hljs-number">117</span> <span class="hljs-number">101</span> <span class="hljs-number">53</span> <span class="hljs-number">122</span> <span class="hljs-number">106</span> <span class="hljs-number">121</span> <span class="hljs-number">120</span>] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:<span class="hljs-number">0</span>} {Key:[<span class="hljs-number">115</span> <span class="hljs-number">101</span> <span class="hljs-number">110</span> <span class="hljs-number">100</span> <span class="hljs-number">101</span> <span class="hljs-number">114</span>] Value:[<span class="hljs-number">116</span> <span class="hljs-number">98</span> <span class="hljs-number">110</span> <span class="hljs-number">98</span> <span class="hljs-number">49</span> <span class="hljs-number">119</span> <span class="hljs-number">120</span> <span class="hljs-number">101</span> <span class="hljs-number">112</span> <span class="hljs-number">108</span> <span class="hljs-number">121</span> <span class="hljs-number">119</span> <span class="hljs-number">55</span> <span class="hljs-number">120</span> <span class="hljs-number">56</span> <span class="hljs-number">97</span> <span class="hljs-number">97</span> <span class="hljs-number">104</span> <span class="hljs-number">121</span> <span class="hljs-number">57</span> <span class="hljs-number">51</span> <span class="hljs-number">119</span> <span class="hljs-number">57</span> <span class="hljs-number">54</span> <span class="hljs-number">121</span> <span class="hljs-number">104</span> <span class="hljs-number">119</span> <span class="hljs-number">109</span> <span class="hljs-number">55</span> <span class="hljs-number">120</span> <span class="hljs-number">99</span> <span class="hljs-number">113</span> <span class="hljs-number">51</span> <span class="hljs-number">107</span> <span class="hljs-number">101</span> <span class="hljs-number">52</span> <span class="hljs-number">102</span> <span class="hljs-number">102</span> <span class="hljs-number">97</span> <span class="hljs-number">115</span> <span class="hljs-number">112</span> <span class="hljs-number">51</span> <span class="hljs-number">100</span>] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:<span class="hljs-number">0</span>} {Key:[<span class="hljs-number">114</span> <span class="hljs-number">101</span> <span class="hljs-number">99</span> <span class="hljs-number">105</span> <span class="hljs-number">112</span> <span class="hljs-number">105</span> <span class="hljs-number">101</span> <span class="hljs-number">110</span> <span class="hljs-number">116</span>] Value:[<span class="hljs-number">116</span> <span class="hljs-number">98</span> <span class="hljs-number">110</span> <span class="hljs-number">98</span> <span class="hljs-number">49</span> <span class="hljs-number">103</span> <span class="hljs-number">57</span> <span class="hljs-number">114</span> <span class="hljs-number">122</span> <span class="hljs-number">99</span> <span class="hljs-number">48</span> <span class="hljs-number">101</span> <span class="hljs-number">50</span> <span class="hljs-number">106</span> <span class="hljs-number">102</span> <span class="hljs-number">56</span> <span class="hljs-number">101</span> <span class="hljs-number">102</span> <span class="hljs-number">51</span> <span class="hljs-number">113</span> <span class="hljs-number">112</span> <span class="hljs-number">57</span> <span class="hljs-number">97</span> <span class="hljs-number">120</span> <span class="hljs-number">56</span> <span class="hljs-number">104</span> <span class="hljs-number">48</span> <span class="hljs-number">112</span> <span class="hljs-number">109</span> <span class="hljs-number">112</span> <span class="hljs-number">109</span> <span class="hljs-number">118</span> <span class="hljs-number">106</span> <span class="hljs-number">122</span> <span class="hljs-number">119</span> <span class="hljs-number">109</span> <span class="hljs-number">116</span> <span class="hljs-number">113</span> <span class="hljs-number">52</span> <span class="hljs-number">106</span> <span class="hljs-number">120</span> <span class="hljs-number">102</span> <span class="hljs-number">114</span>] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:<span class="hljs-number">0</span>} {Key:[<span class="hljs-number">97</span> <span class="hljs-number">99</span> <span class="hljs-number">116</span> <span class="hljs-number">105</span> <span class="hljs-number">111</span> <span class="hljs-number">110</span>] Value:[<span class="hljs-number">99</span> <span class="hljs-number">108</span> <span class="hljs-number">97</span> <span class="hljs-number">105</span> <span class="hljs-number">109</span> <span class="hljs-number">72</span> <span class="hljs-number">84</span> <span class="hljs-number">76</span> <span class="hljs-number">84</span>] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:<span class="hljs-number">0</span>}] Codespace: XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:<span class="hljs-number">0</span>})
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="refund-htlt"></a><a href="#refund-htlt" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Refund HTLT</h3>
<p>Refund Hash Timer Locked Transfer is to refund the locked asset after timelock is expired.</p>
<h4><a class="anchor" aria-hidden="true" id="parameters-3"></a><a href="#parameters-3" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Parameters</h4>
<table>
<thead>
<tr><th>Name</th><th>Type</th><th>Description</th><th>Optional</th></tr>
</thead>
<tbody>
<tr><td>From</td><td>Address</td><td>Sender address</td><td>No</td></tr>
<tr><td>SwapID</td><td>32 bytes</td><td>ID of previously created swap, hex encoding</td><td>No</td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="examples-3"></a><a href="#examples-3" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Examples</h4>
<ul>
<li>On testnet:</li>
</ul>
<p>Command line:</p>
<pre><code class="hljs css language-shell">./tbnbcli token refund --swap-id &lt;swapID&gt; --from &lt;from-key&gt;  --chain-id Binance-Chain-Nile --trust-node --node http://data-seed-pre-0-s3.binance.org:80
</code></pre>
<p>Javascript:</p>
<pre><code class="hljs css language-javascript"><span class="hljs-keyword">const</span> client = <span class="hljs-keyword">new</span> BncClient(<span class="hljs-string">"https://testnet-dex.binance.org"</span>);
<span class="hljs-keyword">const</span> privateKey = crypto.getPrivateKeyFromMnemonic(mnemonic);
client.setPrivateKey(privateKey);
<span class="hljs-keyword">const</span> swapID =
  <span class="hljs-string">"61daf59e977c5f718f5aaedeaf69ccbea1c376db5274a84bca88848696164ffe"</span>; <span class="hljs-comment">// the ID of an existing swap</span>
<span class="hljs-keyword">const</span> res = client.swap.refundHTLT(<span class="hljs-keyword">from</span>, swapID, randomNumber);
</code></pre>
<p>Common error:</p>
<ul>
<li>Already complete</li>
</ul>
<pre><code class="hljs css language-shell">ERROR: {"codespace":8,"code":12,"abci_code":524300,"message":"Expected swap status is Open, actually it is Completed"}
</code></pre>
<ul>
<li>Not expired</li>
</ul>
<pre><code class="hljs css language-json">ERROR: {"codespace":8,"code":8,"abci_code":524296,"message":"Current block height is 40003412, the expire height (40013236) is still not reached"}
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="query-atomic-swap"></a><a href="#query-atomic-swap" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Query Atomic Swap</h3>
<p>Query atomic swap allows you to search swap information by <code>swapID</code></p>
<h4><a class="anchor" aria-hidden="true" id="parameters-4"></a><a href="#parameters-4" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Parameters</h4>
<table>
<thead>
<tr><th>Name</th><th>Type</th><th>Description</th><th>Optional</th></tr>
</thead>
<tbody>
<tr><td>SwapID</td><td>32 bytes</td><td>ID of previously created swap, hex encoding</td><td>No</td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="examples-4"></a><a href="#examples-4" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Examples</h4>
<ul>
<li>On testnet:</li>
</ul>
<pre><code class="hljs"><span class="hljs-string">./tbnbcli</span> token query-swap <span class="hljs-params">--swap-id</span> &lt;swapID&gt; <span class="hljs-params">--chain-id</span> Binance-Chain-Nile <span class="hljs-params">--trust-node</span> <span class="hljs-params">--node</span> http:<span class="hljs-string">//data-seed-pre-0-s3.binance.org</span><span class="hljs-function">:80</span>
</code></pre>
<p>Expected output</p>
<pre><code class="hljs css language-json">{
  <span class="hljs-attr">"from"</span>: <span class="hljs-string">"tbnb1g9rzc0e2jf8ef3qp9ax8h0pmpmvjzwmtq4jxfr"</span>,
  <span class="hljs-attr">"to"</span>: <span class="hljs-string">"tbnb1nkx994qvqmqgk57vguqh6zjlacqzxdkue5zjyx"</span>,
  <span class="hljs-attr">"out_amount"</span>: [
    {
      <span class="hljs-attr">"denom"</span>: <span class="hljs-string">"BNB"</span>,
      <span class="hljs-attr">"amount"</span>: <span class="hljs-string">"100"</span>
    }
  ],
  <span class="hljs-attr">"in_amount"</span>: [
    {
      <span class="hljs-attr">"denom"</span>: <span class="hljs-string">"TEST-599"</span>,
      <span class="hljs-attr">"amount"</span>: <span class="hljs-string">"10000"</span>
    }
  ],
  <span class="hljs-attr">"expected_income"</span>: <span class="hljs-string">"10000:TEST-599"</span>,
  <span class="hljs-attr">"recipient_other_chain"</span>: <span class="hljs-string">""</span>,
  <span class="hljs-attr">"random_number_hash"</span>: <span class="hljs-string">"5768702259ee55983378d7b8207890c666648264524b9dada551386f832ba6b1"</span>,
  <span class="hljs-attr">"random_number"</span>: <span class="hljs-string">"927c1ac33100bdbb001de19c626a05a7c3c11304fc825f5eabb22e741507711b"</span>,
  <span class="hljs-attr">"timestamp"</span>: <span class="hljs-string">"1568792486"</span>,
  <span class="hljs-attr">"cross_chain"</span>: <span class="hljs-literal">false</span>,
  <span class="hljs-attr">"expire_height"</span>: <span class="hljs-string">"39994169"</span>,
  <span class="hljs-attr">"index"</span>: <span class="hljs-string">"53"</span>,
  <span class="hljs-attr">"closed_time"</span>: <span class="hljs-string">"1568792927"</span>,
  <span class="hljs-attr">"status"</span>: <span class="hljs-string">"Completed"</span>
}
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="query-atomic-swap-id-by-recipient"></a><a href="#query-atomic-swap-id-by-recipient" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Query Atomic Swap ID By Recipient</h3>
<p>Query atomic swap ID allows you to search swap history of an recipient. As this is a heavy query interface, some public nodes might close this query interface.</p>
<h4><a class="anchor" aria-hidden="true" id="parameters-5"></a><a href="#parameters-5" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Parameters</h4>
<table>
<thead>
<tr><th>Name</th><th>Type</th><th>Description</th><th>Optional</th></tr>
</thead>
<tbody>
<tr><td>recipient-addr</td><td>Address</td><td>Swap recipient address</td><td>No</td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="examples-5"></a><a href="#examples-5" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Examples</h4>
<ul>
<li>On testnet:</li>
</ul>
<pre><code class="hljs">./tbnbcli token query-swapIDs-<span class="hljs-keyword">by-recipient </span> --recipient-<span class="hljs-keyword">addr </span>&lt;<span class="hljs-keyword">address&gt; </span>--chain-id <span class="hljs-keyword">Binance-Chain-Nile </span>--trust-node --node http://<span class="hljs-meta">data</span>-seed-pre-<span class="hljs-number">0</span>-<span class="hljs-built_in">s3</span>.<span class="hljs-keyword">binance.org:80
</span></code></pre>
<p>Example output:</p>
<pre><code class="hljs">[
  <span class="hljs-string">"4d898bc8558daa4d817486d7a93b77b2c82fcec2123abf4a1eb7d2521237eccd"</span>,
  <span class="hljs-string">"e7cc2e2eb025cc4617ff0bb84fcffc973d7ba34f15dbc51383fe3543ff143e9c"</span>
]
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="query-atomic-swap-id-by-creator"></a><a href="#query-atomic-swap-id-by-creator" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Query Atomic Swap ID By Creator</h3>
<p>Query atomic swap ID allows you to search swap history of an initiator. As this is a heavy query interface, some public nodes might close this query interface.</p>
<h4><a class="anchor" aria-hidden="true" id="parameters-6"></a><a href="#parameters-6" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Parameters</h4>
<table>
<thead>
<tr><th>Name</th><th>Type</th><th>Description</th><th>Optional</th></tr>
</thead>
<tbody>
<tr><td>creator-addr</td><td>Address</td><td>Swap creator address</td><td>No</td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="examples-6"></a><a href="#examples-6" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Examples</h4>
<ul>
<li>On testnet:</li>
</ul>
<pre><code class="hljs">./tbnbcli token query-swapIDs-<span class="hljs-keyword">by-creator </span> --creator-<span class="hljs-keyword">addr </span>&lt;<span class="hljs-keyword">address&gt; </span>--chain-id <span class="hljs-keyword">Binance-Chain-Nile </span>--trust-node --node http://<span class="hljs-meta">data</span>-seed-pre-<span class="hljs-number">0</span>-<span class="hljs-built_in">s3</span>.<span class="hljs-keyword">binance.org:80
</span></code></pre>
<p>Example output:</p>
<pre><code class="hljs">[
  <span class="hljs-string">"7341d4ea0519af90d98f60fee45fdc7e385621875ea982bc8caf1fd7a49af8c3"</span>,
  <span class="hljs-string">"290664c1e8123966d8f9050fdc9d93e94b0e51b36e2e2a6978e492d3796423f1"</span>,
  <span class="hljs-string">"b260dad3cf63e558fe102a050afbe52d5dd2e30c7db76da33d02ce5f85d07fcf"</span>,
  <span class="hljs-string">"2b532bf9171c4d33d80fc4a8d6603581a86345b41552337482224d8476fcf5f7"</span>,
  <span class="hljs-string">"20d22bbfa579520f0ba79cd176fb2b06aa8dbe5b0a6ba8c9b761129f6a42a94c"</span>
]
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="fees"></a><a href="#fees" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Fees</h2>
<table>
<thead>
<tr><th>Transaction Type</th><th>Pay in Non-BNB Asset</th><th>Pay in BNB</th><th>Exchange (DEX) Related</th></tr>
</thead>
<tbody>
<tr><td>HTLT</td><td>N/A</td><td>0.000375 BNB</td><td>Y</td></tr>
<tr><td>depositHTLT</td><td>N/A</td><td>0.000375 BNB</td><td>Y</td></tr>
<tr><td>claimHTLT</td><td>N/A</td><td>0.000375 BNB</td><td>Y</td></tr>
<tr><td>refundHTLT</td><td>N/A</td><td>0.000375 BNB</td><td>Y</td></tr>
</tbody>
</table>
<h2><a class="anchor" aria-hidden="true" id="workflows"></a><a href="#workflows" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Workflows</h2>
<h3><a class="anchor" aria-hidden="true" id="preparations"></a><a href="#preparations" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Preparations</h3>
<ol>
<li>Deploy smart-contract which supports Atomic Peg Swap (APS), there is already <a href="https://github.com/binance-chain/bep3-smartcontracts">one example</a> for Ethereum</li>
<li>Deploy <code>deputy</code> process for handling swap activities by token owners, there is an existing open-source solution here: <a href="https://github.com/binance-chain/bep3-deputy">https://github.com/binance-chain/bep3-deputy</a></li>
<li>Issue and transfer enough tokens</li>
</ol>
<h3><a class="anchor" aria-hidden="true" id="testnet-deployment"></a><a href="#testnet-deployment" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Testnet Deployment</h3>
<ul>
<li>ERC20 contract has been deployed here: <a href="https://ropsten.etherscan.io/address/0xd93395b2771914e1679155f3ea58c41d89d96098">https://ropsten.etherscan.io/address/0xd93395b2771914e1679155f3ea58c41d89d96098</a></li>
<li>Token Symbol: <strong>PPC</strong></li>
<li>SmartContract has been deployed here: <a href="https://ropsten.etherscan.io/address/0x12dcbf79be178479870a473a99d91f535ed960ad">https://ropsten.etherscan.io/address/0x12dcbf79be178479870a473a99d91f535ed960ad</a></li>
<li>Its corresponding address on testnet is: <code>tbnb1pk45lc2k7lmf0pnfa59l0uhwrvpk8shsema7gr</code>on Binance Chain and <code>0xD93395B2771914E1679155F3EA58C41d89D96098</code> on Ethereum testnet</li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="swap-tokens-from-ethereum-to-binance-chain"></a><a href="#swap-tokens-from-ethereum-to-binance-chain" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Swap Tokens from Ethereum to Binance Chain</h3>
<p><img src="/docs-site/docs/assets/eth2bnc.png" alt="image-20190918193751444"></p>
<h4><a class="anchor" aria-hidden="true" id="1-approve-swap-transaction"></a><a href="#1-approve-swap-transaction" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1. Approve Swap Transaction</h4>
<p>Go to <a href="https://ropsten.etherscan.io/address/0xd93395b2771914e1679155f3ea58c41d89d96098#writeContract">this page</a> and approve some amount of tokens.</p>
<ul>
<li>Function: <em>Approve</em></li>
<li>Prameters:
<ul>
<li>_spender: address of smartcontract, which is <code>0x12DCBf79BE178479870A473A99d91f535ed960AD</code></li>
<li>_value: approved amount, should be bumped by e^10</li>
</ul></li>
</ul>
<blockquote>
<p>Note: Please approve more than 1token. In the following example, 100 PPC token was approved:</p>
</blockquote>
<p>Example of approve 100 PPC on <a href="https://ropsten.etherscan.io/tx/0xfa640b382d3842cf508ac347090d2550e35e2193804d2a9318fbbdcdd54c846b">ropsten testnet</a></p>
<h4><a class="anchor" aria-hidden="true" id="2-call-htlt-function-from-ethereum"></a><a href="#2-call-htlt-function-from-ethereum" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2. Call <code>HTLT</code> function From Ethereum</h4>
<p>Go to <a href="https://ropsten.etherscan.io/address/0xd93395b2771914e1679155f3ea58c41d89d96098#writeContract">smartcontract</a> and call <code>HTLT</code> function</p>
<ul>
<li>Function: <em>htlt</em></li>
<li>Prameters:
<ul>
<li>_randomNumberHash: SHA256(randomNumber||timestamp), randomNumber is 32-length random byte array</li>
<li>_timestamp: it should be about 10 mins span around current timestamp</li>
<li>_heightSpan: it's a customized filed for deputy operator. it should be more than 200 for this deputy.</li>
<li>_recipientAddr: deputy address on Ethereum, it's <code>0x1C002969Fe201975eD8F054916b071672326858e</code> for this one</li>
<li>_bep2SenderAddr: omit this field with <code>0x0</code></li>
<li>_bep2RecipientAddr: Decode your testnet address from bech32 encoded to hex, for example: 0xc41f2a85e1d3629637de1222017dce46c6c8e4b9</li>
<li>_outAmount: approved amount, should be bumped by e^10</li>
<li>_bep2Amount: _outAmount * exchange rate, the default rate is 1</li>
</ul></li>
</ul>
<p>Example of <code>htlt</code> <a href="https://ropsten.etherscan.io/tx/0xa2444cc1e52e09027ec68bf8955e7084235255f9f18d9b837a12fd63e6f0145c">transaction</a></p>
<h4><a class="anchor" aria-hidden="true" id="3-deputy-call-htlt-on-binance-chain"></a><a href="#3-deputy-call-htlt-on-binance-chain" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3. Deputy Call HTLT on Binance Chain</h4>
<p>Then, Deputy will send <code>HTLT</code> transaction <a href="https://testnet-explorer.binance.org/tx/99CBC2896F0CF14DDAB0684BDA0A3E9FF2271056E68EC3559AB7FB24E0EE97DE">here</a></p>
<h4><a class="anchor" aria-hidden="true" id="4-claim-htlt-on-binance-chain"></a><a href="#4-claim-htlt-on-binance-chain" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>4. Claim HTLT on Binance Chain</h4>
<ul>
<li>Get the <code>swapID</code> on Binance Chain</li>
</ul>
<pre><code class="hljs">./tbnbcli token query-swapIDs-<span class="hljs-keyword">by-recipient </span> --recipient-<span class="hljs-keyword">addr </span>tbnb1cs0j4p0p6d3fvd77zg3qzlwwgmrv3e9e63423w --chain-id <span class="hljs-keyword">Binance-Chain-Nile </span>--trust-node --node http://<span class="hljs-meta">data</span>-seed-pre-<span class="hljs-number">0</span>-<span class="hljs-built_in">s3</span>.<span class="hljs-keyword">binance.org:80
</span>[
  <span class="hljs-string">"12aacc3bdc2cef97e8e45cc9b409796df57904a4e9c76863ad8420ff75f13128"</span>
]
</code></pre>
<p>You can also get swapID by <a href="https://github.com/binance-chain/javascript-sdk/blob/91b4d39e96e6433c16a3a1288931f84923075543/src/utils/index.js#L266">calculateSwapID in javascript-sdk</a>. It requires three parameters:</p>
<table>
<thead>
<tr><th>Name</th><th>Type</th><th>Description</th><th>Example</th></tr>
</thead>
<tbody>
<tr><td>randomNumberHash</td><td>string</td><td>randomNumberHash in client HTLT transaction on Ethereum</td><td>5a3728a8f4ecb8b4cb0b983a9441b7d69f95229c4aa531e6e3827d7c19beac82</td></tr>
<tr><td>sender</td><td>string</td><td>deputy bep2 address</td><td>tbnb1pk45lc2k7lmf0pnfa59l0uhwrvpk8shsema7gr</td></tr>
<tr><td>senderOtherChain</td><td>string</td><td>client ethereum address</td><td>0x133d144f52705ceb3f5801b63b9ebccf4102f5ed</td></tr>
</tbody>
</table>
<ul>
<li>Query the swap by <code>swapID</code></li>
</ul>
<pre><code class="hljs">{
  <span class="hljs-attr">"from"</span>: <span class="hljs-string">"tbnb1pk45lc2k7lmf0pnfa59l0uhwrvpk8shsema7gr"</span>,
  <span class="hljs-attr">"to"</span>: <span class="hljs-string">"tbnb1cs0j4p0p6d3fvd77zg3qzlwwgmrv3e9e63423w"</span>,
  <span class="hljs-attr">"out_amount"</span>: [
    {
      <span class="hljs-attr">"denom"</span>: <span class="hljs-string">"PPC-00A"</span>,
      <span class="hljs-attr">"amount"</span>: <span class="hljs-string">"9999999000"</span>
    }
  ],
  <span class="hljs-attr">"in_amount"</span>: <span class="hljs-literal">null</span>,
  <span class="hljs-attr">"expected_income"</span>: <span class="hljs-string">""</span>,
  <span class="hljs-attr">"recipient_other_chain"</span>: <span class="hljs-string">"0x1C002969Fe201975eD8F054916b071672326858e"</span>,
  <span class="hljs-attr">"random_number_hash"</span>: <span class="hljs-string">"5a3728a8f4ecb8b4cb0b983a9441b7d69f95229c4aa531e6e3827d7c19beac82"</span>,
  <span class="hljs-attr">"random_number"</span>: <span class="hljs-string">""</span>,
  <span class="hljs-attr">"timestamp"</span>: <span class="hljs-string">"1569497984"</span>,
  <span class="hljs-attr">"cross_chain"</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">"expire_height"</span>: <span class="hljs-string">"41380567"</span>,
  <span class="hljs-attr">"index"</span>: <span class="hljs-string">"1947"</span>,
  <span class="hljs-attr">"closed_time"</span>: <span class="hljs-string">""</span>,
  <span class="hljs-attr">"status"</span>: <span class="hljs-string">"Open"</span>
}
</code></pre>
<ul>
<li><p>Verify parameters in the swap:</p>
<pre><code class="hljs">  - `random_number_hash` must equal to the randomNumberHash in client HTLT transaction on ethereum
  - `to` must equals to client wallet address
  - `timestamp` must equal to the timestamp in client HTLT transaction on ethereum
  - `out_amount` should be reasonable. Please note that the decimals of bep2 tokens is 8, the out_amount should be something around 10000000000:PPC, deputy will deduct some fees.
  - `expire_height` must not be passed and should be enough for send claim transaction
</code></pre></li>
<li><p>Send claim transaction on Binance Chain</p></li>
</ul>
<pre><code class="hljs"><span class="hljs-string">./tbnbcli</span> token claim <span class="hljs-params">--swap-id</span>  12aacc3bdc2cef97e8e45cc9b409796df57904a4e9c76863ad8420ff75f13128  <span class="hljs-params">--random-number</span> &lt;random-number&gt; <span class="hljs-params">--from</span> &lt;from-key&gt;  <span class="hljs-params">--chain-id</span> Binance-Chain-Nile <span class="hljs-params">--trust-node</span> <span class="hljs-params">--node</span> http:<span class="hljs-string">//data-seed-pre-0-s3.binance.org</span><span class="hljs-function">:80</span>
</code></pre>
<p>Example of <code>claim</code> tx on <a href="https://testnet-dex.binance.org/api/v1/tx/6BA714E6D107F1D9634DDC159F560A1FB61393B8E15723EFD70B9EA8B0B1AA9A?format=json">testnet</a></p>
<h4><a class="anchor" aria-hidden="true" id="5-deputy-claim-erc20-token"></a><a href="#5-deputy-claim-erc20-token" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>5. Deputy Claim ERC20 Token</h4>
<p>Deputy will claim ERC20 tokens afterwards with <a href="https://ropsten.etherscan.io/tx/0x3a422bdb273d4eb4d112ae8e51e8acd3ad706b2af67af20a5f15a18e4acc70fc">claim transaction</a></p>
<h4><a class="anchor" aria-hidden="true" id="6-demo-for-client-app-swap-erc20-to-bep2"></a><a href="#6-demo-for-client-app-swap-erc20-to-bep2" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>6. Demo for Client APP: swap erc20 to bep2</h4>
<p>This is a javascript implementation for client app to swap <a href="https://ropsten.etherscan.io/address/0xd93395b2771914e1679155f3ea58c41d89d96098">PPC</a> to <a href="https://testnet-explorer.binance.org/asset/PPC-00A">PPC-00A</a> with deputy.</p>
<pre><code class="hljs css language-javascript"><span class="hljs-keyword">const</span> erc20ContractAddr = <span class="hljs-string">"0xd93395b2771914e1679155f3ea58c41d89d96098"</span>;
<span class="hljs-keyword">const</span> swapContractAddr = <span class="hljs-string">"0x12DCBf79BE178479870A473A99d91f535ed960AD"</span>;

<span class="hljs-keyword">const</span> deputyEthWalletAddr = <span class="hljs-string">"0x1C002969Fe201975eD8F054916b071672326858e"</span>;
<span class="hljs-keyword">const</span> deputyBNBWalletAddr = <span class="hljs-string">"tbnb1pk45lc2k7lmf0pnfa59l0uhwrvpk8shsema7gr"</span>;

<span class="hljs-keyword">const</span> clientEthWalletAddr = <span class="hljs-string">"0xfA5E36a04EeF3152092099F352DDbe88953bB540"</span>;
<span class="hljs-keyword">const</span> clientEthWalletKey = <span class="hljs-keyword">new</span> Buffer(
  <span class="hljs-string">"89A0F0E0732ACAA7AD37C9E6D7A9798ECCE6940C63FF0290A58B1C1C1697486A"</span>,
  <span class="hljs-string">"hex"</span>
);

<span class="hljs-keyword">const</span> clientBnbWalletAddr = <span class="hljs-string">"tbnb17vwyu8npjj5pywh3keq2lm7d4v76n434pwd8av"</span>;
<span class="hljs-keyword">const</span> clientBnbWalletMnemonic =
  <span class="hljs-string">"lawsuit margin siege phrase fabric matrix like picnic day thrive correct velvet stool type broom upon flee fee ten senior install wrestle soap sick"</span>;

<span class="hljs-keyword">const</span> web3 = <span class="hljs-keyword">new</span> Web3(
  <span class="hljs-keyword">new</span> Web3.providers.HttpProvider(
    <span class="hljs-string">"https://ropsten.infura.io/v3/1c5b38a27f92410cb5feb13b6efb2e14"</span>
  )
);
<span class="hljs-keyword">const</span> bnbClient = <span class="hljs-keyword">new</span> BncClient(<span class="hljs-string">"https://testnet-dex.binance.org"</span>);
<span class="hljs-keyword">await</span> bnbClient.initChain();
bnbClient.setPrivateKey(
  crypto.getPrivateKeyFromMnemonic(clientBnbWalletMnemonic)
);
bnbClient.useDefaultSigningDelegate();
bnbClient.useDefaultBroadcastDelegate();
<span class="hljs-keyword">const</span> bnbRPC = <span class="hljs-keyword">new</span> rpcClient(<span class="hljs-string">"https://seed-pre-s3.binance.org"</span>, <span class="hljs-string">"testnet"</span>);

<span class="hljs-keyword">const</span> erc20Contract = <span class="hljs-keyword">new</span> web3.eth.Contract(
  [
    {
      <span class="hljs-attr">constant</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">inputs</span>: [],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"name"</span>,
      <span class="hljs-attr">outputs</span>: [{ <span class="hljs-attr">name</span>: <span class="hljs-string">""</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"string"</span> }],
      <span class="hljs-attr">payable</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">stateMutability</span>: <span class="hljs-string">"view"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"function"</span>
    },
    {
      <span class="hljs-attr">constant</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">inputs</span>: [
        { <span class="hljs-attr">name</span>: <span class="hljs-string">"_spender"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"address"</span> },
        { <span class="hljs-attr">name</span>: <span class="hljs-string">"_value"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"uint256"</span> }
      ],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"approve"</span>,
      <span class="hljs-attr">outputs</span>: [{ <span class="hljs-attr">name</span>: <span class="hljs-string">"success"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"bool"</span> }],
      <span class="hljs-attr">payable</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">stateMutability</span>: <span class="hljs-string">"nonpayable"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"function"</span>
    },
    {
      <span class="hljs-attr">constant</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">inputs</span>: [{ <span class="hljs-attr">name</span>: <span class="hljs-string">"_evilUser"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"address"</span> }],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"addBlackList"</span>,
      <span class="hljs-attr">outputs</span>: [],
      <span class="hljs-attr">payable</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">stateMutability</span>: <span class="hljs-string">"nonpayable"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"function"</span>
    },
    {
      <span class="hljs-attr">constant</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">inputs</span>: [],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"totalSupply"</span>,
      <span class="hljs-attr">outputs</span>: [{ <span class="hljs-attr">name</span>: <span class="hljs-string">""</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"uint256"</span> }],
      <span class="hljs-attr">payable</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">stateMutability</span>: <span class="hljs-string">"view"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"function"</span>
    },
    {
      <span class="hljs-attr">constant</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">inputs</span>: [
        { <span class="hljs-attr">name</span>: <span class="hljs-string">"_from"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"address"</span> },
        { <span class="hljs-attr">name</span>: <span class="hljs-string">"_to"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"address"</span> },
        { <span class="hljs-attr">name</span>: <span class="hljs-string">"_value"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"uint256"</span> }
      ],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"transferFrom"</span>,
      <span class="hljs-attr">outputs</span>: [{ <span class="hljs-attr">name</span>: <span class="hljs-string">"success"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"bool"</span> }],
      <span class="hljs-attr">payable</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">stateMutability</span>: <span class="hljs-string">"nonpayable"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"function"</span>
    },
    {
      <span class="hljs-attr">constant</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">inputs</span>: [],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"decimals"</span>,
      <span class="hljs-attr">outputs</span>: [{ <span class="hljs-attr">name</span>: <span class="hljs-string">""</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"uint8"</span> }],
      <span class="hljs-attr">payable</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">stateMutability</span>: <span class="hljs-string">"view"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"function"</span>
    },
    {
      <span class="hljs-attr">constant</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">inputs</span>: [
        { <span class="hljs-attr">name</span>: <span class="hljs-string">"_spender"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"address"</span> },
        { <span class="hljs-attr">name</span>: <span class="hljs-string">"_addedValue"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"uint256"</span> }
      ],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"increaseAllowance"</span>,
      <span class="hljs-attr">outputs</span>: [{ <span class="hljs-attr">name</span>: <span class="hljs-string">"success"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"bool"</span> }],
      <span class="hljs-attr">payable</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">stateMutability</span>: <span class="hljs-string">"nonpayable"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"function"</span>
    },
    {
      <span class="hljs-attr">constant</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">inputs</span>: [],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"unpause"</span>,
      <span class="hljs-attr">outputs</span>: [],
      <span class="hljs-attr">payable</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">stateMutability</span>: <span class="hljs-string">"nonpayable"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"function"</span>
    },
    {
      <span class="hljs-attr">constant</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">inputs</span>: [{ <span class="hljs-attr">name</span>: <span class="hljs-string">"account"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"address"</span> }],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"isPauser"</span>,
      <span class="hljs-attr">outputs</span>: [{ <span class="hljs-attr">name</span>: <span class="hljs-string">""</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"bool"</span> }],
      <span class="hljs-attr">payable</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">stateMutability</span>: <span class="hljs-string">"view"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"function"</span>
    },
    {
      <span class="hljs-attr">constant</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">inputs</span>: [{ <span class="hljs-attr">name</span>: <span class="hljs-string">"_maker"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"address"</span> }],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"getBlackListStatus"</span>,
      <span class="hljs-attr">outputs</span>: [{ <span class="hljs-attr">name</span>: <span class="hljs-string">""</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"bool"</span> }],
      <span class="hljs-attr">payable</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">stateMutability</span>: <span class="hljs-string">"view"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"function"</span>
    },
    {
      <span class="hljs-attr">constant</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">inputs</span>: [],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"paused"</span>,
      <span class="hljs-attr">outputs</span>: [{ <span class="hljs-attr">name</span>: <span class="hljs-string">""</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"bool"</span> }],
      <span class="hljs-attr">payable</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">stateMutability</span>: <span class="hljs-string">"view"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"function"</span>
    },
    {
      <span class="hljs-attr">constant</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">inputs</span>: [],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"renouncePauser"</span>,
      <span class="hljs-attr">outputs</span>: [],
      <span class="hljs-attr">payable</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">stateMutability</span>: <span class="hljs-string">"nonpayable"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"function"</span>
    },
    {
      <span class="hljs-attr">constant</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">inputs</span>: [{ <span class="hljs-attr">name</span>: <span class="hljs-string">"who"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"address"</span> }],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"balanceOf"</span>,
      <span class="hljs-attr">outputs</span>: [{ <span class="hljs-attr">name</span>: <span class="hljs-string">""</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"uint256"</span> }],
      <span class="hljs-attr">payable</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">stateMutability</span>: <span class="hljs-string">"view"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"function"</span>
    },
    {
      <span class="hljs-attr">constant</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">inputs</span>: [],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"renounceOwnership"</span>,
      <span class="hljs-attr">outputs</span>: [],
      <span class="hljs-attr">payable</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">stateMutability</span>: <span class="hljs-string">"nonpayable"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"function"</span>
    },
    {
      <span class="hljs-attr">constant</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">inputs</span>: [{ <span class="hljs-attr">name</span>: <span class="hljs-string">"account"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"address"</span> }],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"addPauser"</span>,
      <span class="hljs-attr">outputs</span>: [],
      <span class="hljs-attr">payable</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">stateMutability</span>: <span class="hljs-string">"nonpayable"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"function"</span>
    },
    {
      <span class="hljs-attr">constant</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">inputs</span>: [],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"pause"</span>,
      <span class="hljs-attr">outputs</span>: [],
      <span class="hljs-attr">payable</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">stateMutability</span>: <span class="hljs-string">"nonpayable"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"function"</span>
    },
    {
      <span class="hljs-attr">constant</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">inputs</span>: [],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"owner"</span>,
      <span class="hljs-attr">outputs</span>: [{ <span class="hljs-attr">name</span>: <span class="hljs-string">""</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"address"</span> }],
      <span class="hljs-attr">payable</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">stateMutability</span>: <span class="hljs-string">"view"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"function"</span>
    },
    {
      <span class="hljs-attr">constant</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">inputs</span>: [],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"isOwner"</span>,
      <span class="hljs-attr">outputs</span>: [{ <span class="hljs-attr">name</span>: <span class="hljs-string">""</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"bool"</span> }],
      <span class="hljs-attr">payable</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">stateMutability</span>: <span class="hljs-string">"view"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"function"</span>
    },
    {
      <span class="hljs-attr">constant</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">inputs</span>: [],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"symbol"</span>,
      <span class="hljs-attr">outputs</span>: [{ <span class="hljs-attr">name</span>: <span class="hljs-string">""</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"string"</span> }],
      <span class="hljs-attr">payable</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">stateMutability</span>: <span class="hljs-string">"view"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"function"</span>
    },
    {
      <span class="hljs-attr">constant</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">inputs</span>: [
        { <span class="hljs-attr">name</span>: <span class="hljs-string">"_spender"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"address"</span> },
        { <span class="hljs-attr">name</span>: <span class="hljs-string">"_subtractedValue"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"uint256"</span> }
      ],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"decreaseAllowance"</span>,
      <span class="hljs-attr">outputs</span>: [{ <span class="hljs-attr">name</span>: <span class="hljs-string">"success"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"bool"</span> }],
      <span class="hljs-attr">payable</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">stateMutability</span>: <span class="hljs-string">"nonpayable"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"function"</span>
    },
    {
      <span class="hljs-attr">constant</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">inputs</span>: [
        { <span class="hljs-attr">name</span>: <span class="hljs-string">"_to"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"address"</span> },
        { <span class="hljs-attr">name</span>: <span class="hljs-string">"_value"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"uint256"</span> }
      ],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"transfer"</span>,
      <span class="hljs-attr">outputs</span>: [{ <span class="hljs-attr">name</span>: <span class="hljs-string">"success"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"bool"</span> }],
      <span class="hljs-attr">payable</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">stateMutability</span>: <span class="hljs-string">"nonpayable"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"function"</span>
    },
    {
      <span class="hljs-attr">constant</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">inputs</span>: [{ <span class="hljs-attr">name</span>: <span class="hljs-string">"amount"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"uint256"</span> }],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"issue"</span>,
      <span class="hljs-attr">outputs</span>: [],
      <span class="hljs-attr">payable</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">stateMutability</span>: <span class="hljs-string">"nonpayable"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"function"</span>
    },
    {
      <span class="hljs-attr">constant</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">inputs</span>: [{ <span class="hljs-attr">name</span>: <span class="hljs-string">"amount"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"uint256"</span> }],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"redeem"</span>,
      <span class="hljs-attr">outputs</span>: [],
      <span class="hljs-attr">payable</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">stateMutability</span>: <span class="hljs-string">"nonpayable"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"function"</span>
    },
    {
      <span class="hljs-attr">constant</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">inputs</span>: [
        { <span class="hljs-attr">name</span>: <span class="hljs-string">"_owner"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"address"</span> },
        { <span class="hljs-attr">name</span>: <span class="hljs-string">"_spender"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"address"</span> }
      ],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"allowance"</span>,
      <span class="hljs-attr">outputs</span>: [{ <span class="hljs-attr">name</span>: <span class="hljs-string">"remaining"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"uint256"</span> }],
      <span class="hljs-attr">payable</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">stateMutability</span>: <span class="hljs-string">"view"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"function"</span>
    },
    {
      <span class="hljs-attr">constant</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">inputs</span>: [{ <span class="hljs-attr">name</span>: <span class="hljs-string">""</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"address"</span> }],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"isBlackListed"</span>,
      <span class="hljs-attr">outputs</span>: [{ <span class="hljs-attr">name</span>: <span class="hljs-string">""</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"bool"</span> }],
      <span class="hljs-attr">payable</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">stateMutability</span>: <span class="hljs-string">"view"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"function"</span>
    },
    {
      <span class="hljs-attr">constant</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">inputs</span>: [{ <span class="hljs-attr">name</span>: <span class="hljs-string">"_clearedUser"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"address"</span> }],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"removeBlackList"</span>,
      <span class="hljs-attr">outputs</span>: [],
      <span class="hljs-attr">payable</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">stateMutability</span>: <span class="hljs-string">"nonpayable"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"function"</span>
    },
    {
      <span class="hljs-attr">constant</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">inputs</span>: [{ <span class="hljs-attr">name</span>: <span class="hljs-string">"newOwner"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"address"</span> }],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"transferOwnership"</span>,
      <span class="hljs-attr">outputs</span>: [],
      <span class="hljs-attr">payable</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">stateMutability</span>: <span class="hljs-string">"nonpayable"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"function"</span>
    },
    {
      <span class="hljs-attr">constant</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">inputs</span>: [{ <span class="hljs-attr">name</span>: <span class="hljs-string">"_blackListedUser"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"address"</span> }],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"destroyBlackFunds"</span>,
      <span class="hljs-attr">outputs</span>: [],
      <span class="hljs-attr">payable</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">stateMutability</span>: <span class="hljs-string">"nonpayable"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"function"</span>
    },
    {
      <span class="hljs-attr">inputs</span>: [
        { <span class="hljs-attr">name</span>: <span class="hljs-string">"_initialSupply"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"uint256"</span> },
        { <span class="hljs-attr">name</span>: <span class="hljs-string">"_name"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"string"</span> },
        { <span class="hljs-attr">name</span>: <span class="hljs-string">"_symbol"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"string"</span> },
        { <span class="hljs-attr">name</span>: <span class="hljs-string">"_decimals"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"uint8"</span> }
      ],
      <span class="hljs-attr">payable</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">stateMutability</span>: <span class="hljs-string">"nonpayable"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"constructor"</span>
    },
    {
      <span class="hljs-attr">anonymous</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">inputs</span>: [{ <span class="hljs-attr">indexed</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"amount"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"uint256"</span> }],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"Issue"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"event"</span>
    },
    {
      <span class="hljs-attr">anonymous</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">inputs</span>: [{ <span class="hljs-attr">indexed</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"amount"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"uint256"</span> }],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"Redeem"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"event"</span>
    },
    {
      <span class="hljs-attr">anonymous</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">inputs</span>: [
        { <span class="hljs-attr">indexed</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"_blackListedUser"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"address"</span> },
        { <span class="hljs-attr">indexed</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"_balance"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"uint256"</span> }
      ],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"DestroyedBlackFunds"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"event"</span>
    },
    {
      <span class="hljs-attr">anonymous</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">inputs</span>: [{ <span class="hljs-attr">indexed</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"_user"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"address"</span> }],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"AddedBlackList"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"event"</span>
    },
    {
      <span class="hljs-attr">anonymous</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">inputs</span>: [{ <span class="hljs-attr">indexed</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"_user"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"address"</span> }],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"RemovedBlackList"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"event"</span>
    },
    {
      <span class="hljs-attr">anonymous</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">inputs</span>: [{ <span class="hljs-attr">indexed</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"account"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"address"</span> }],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"Paused"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"event"</span>
    },
    {
      <span class="hljs-attr">anonymous</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">inputs</span>: [{ <span class="hljs-attr">indexed</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"account"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"address"</span> }],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"Unpaused"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"event"</span>
    },
    {
      <span class="hljs-attr">anonymous</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">inputs</span>: [
        { <span class="hljs-attr">indexed</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"from"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"address"</span> },
        { <span class="hljs-attr">indexed</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"to"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"address"</span> },
        { <span class="hljs-attr">indexed</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"value"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"uint256"</span> }
      ],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"Transfer"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"event"</span>
    },
    {
      <span class="hljs-attr">anonymous</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">inputs</span>: [
        { <span class="hljs-attr">indexed</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"owner"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"address"</span> },
        { <span class="hljs-attr">indexed</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"spender"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"address"</span> },
        { <span class="hljs-attr">indexed</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"value"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"uint256"</span> }
      ],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"Approval"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"event"</span>
    },
    {
      <span class="hljs-attr">anonymous</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">inputs</span>: [
        { <span class="hljs-attr">indexed</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"previousOwner"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"address"</span> },
        { <span class="hljs-attr">indexed</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"newOwner"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"address"</span> }
      ],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"OwnershipTransferred"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"event"</span>
    },
    {
      <span class="hljs-attr">anonymous</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">inputs</span>: [{ <span class="hljs-attr">indexed</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"account"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"address"</span> }],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"PauserAdded"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"event"</span>
    },
    {
      <span class="hljs-attr">anonymous</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">inputs</span>: [{ <span class="hljs-attr">indexed</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"account"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"address"</span> }],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"PauserRemoved"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"event"</span>
    }
  ],
  erc20ContractAddr
);
<span class="hljs-keyword">const</span> swapContract = <span class="hljs-keyword">new</span> web3.eth.Contract(
  [
    {
      <span class="hljs-attr">constant</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">inputs</span>: [],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"ERC20ContractAddr"</span>,
      <span class="hljs-attr">outputs</span>: [{ <span class="hljs-attr">name</span>: <span class="hljs-string">""</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"address"</span> }],
      <span class="hljs-attr">payable</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">stateMutability</span>: <span class="hljs-string">"view"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"function"</span>
    },
    {
      <span class="hljs-attr">constant</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">inputs</span>: [{ <span class="hljs-attr">name</span>: <span class="hljs-string">"_swapID"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"bytes32"</span> }],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"isSwapExist"</span>,
      <span class="hljs-attr">outputs</span>: [{ <span class="hljs-attr">name</span>: <span class="hljs-string">""</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"bool"</span> }],
      <span class="hljs-attr">payable</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">stateMutability</span>: <span class="hljs-string">"view"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"function"</span>
    },
    {
      <span class="hljs-attr">constant</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">inputs</span>: [{ <span class="hljs-attr">name</span>: <span class="hljs-string">"_swapID"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"bytes32"</span> }],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"refund"</span>,
      <span class="hljs-attr">outputs</span>: [{ <span class="hljs-attr">name</span>: <span class="hljs-string">""</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"bool"</span> }],
      <span class="hljs-attr">payable</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">stateMutability</span>: <span class="hljs-string">"nonpayable"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"function"</span>
    },
    {
      <span class="hljs-attr">constant</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">inputs</span>: [
        { <span class="hljs-attr">name</span>: <span class="hljs-string">"_randomNumberHash"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"bytes32"</span> },
        { <span class="hljs-attr">name</span>: <span class="hljs-string">"_swapSender"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"address"</span> },
        { <span class="hljs-attr">name</span>: <span class="hljs-string">"_bep2SenderAddr"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"bytes20"</span> }
      ],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"calSwapID"</span>,
      <span class="hljs-attr">outputs</span>: [{ <span class="hljs-attr">name</span>: <span class="hljs-string">""</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"bytes32"</span> }],
      <span class="hljs-attr">payable</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">stateMutability</span>: <span class="hljs-string">"pure"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"function"</span>
    },
    {
      <span class="hljs-attr">constant</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">inputs</span>: [
        { <span class="hljs-attr">name</span>: <span class="hljs-string">"_swapID"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"bytes32"</span> },
        { <span class="hljs-attr">name</span>: <span class="hljs-string">"_randomNumber"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"bytes32"</span> }
      ],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"claim"</span>,
      <span class="hljs-attr">outputs</span>: [{ <span class="hljs-attr">name</span>: <span class="hljs-string">""</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"bool"</span> }],
      <span class="hljs-attr">payable</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">stateMutability</span>: <span class="hljs-string">"nonpayable"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"function"</span>
    },
    {
      <span class="hljs-attr">constant</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">inputs</span>: [
        { <span class="hljs-attr">name</span>: <span class="hljs-string">"_randomNumberHash"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"bytes32"</span> },
        { <span class="hljs-attr">name</span>: <span class="hljs-string">"_timestamp"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"uint64"</span> },
        { <span class="hljs-attr">name</span>: <span class="hljs-string">"_heightSpan"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"uint256"</span> },
        { <span class="hljs-attr">name</span>: <span class="hljs-string">"_recipientAddr"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"address"</span> },
        { <span class="hljs-attr">name</span>: <span class="hljs-string">"_bep2SenderAddr"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"bytes20"</span> },
        { <span class="hljs-attr">name</span>: <span class="hljs-string">"_bep2RecipientAddr"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"bytes20"</span> },
        { <span class="hljs-attr">name</span>: <span class="hljs-string">"_outAmount"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"uint256"</span> },
        { <span class="hljs-attr">name</span>: <span class="hljs-string">"_bep2Amount"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"uint256"</span> }
      ],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"htlt"</span>,
      <span class="hljs-attr">outputs</span>: [{ <span class="hljs-attr">name</span>: <span class="hljs-string">""</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"bool"</span> }],
      <span class="hljs-attr">payable</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">stateMutability</span>: <span class="hljs-string">"nonpayable"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"function"</span>
    },
    {
      <span class="hljs-attr">constant</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">inputs</span>: [{ <span class="hljs-attr">name</span>: <span class="hljs-string">"_swapID"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"bytes32"</span> }],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"claimable"</span>,
      <span class="hljs-attr">outputs</span>: [{ <span class="hljs-attr">name</span>: <span class="hljs-string">""</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"bool"</span> }],
      <span class="hljs-attr">payable</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">stateMutability</span>: <span class="hljs-string">"view"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"function"</span>
    },
    {
      <span class="hljs-attr">constant</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">inputs</span>: [{ <span class="hljs-attr">name</span>: <span class="hljs-string">"_swapID"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"bytes32"</span> }],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"refundable"</span>,
      <span class="hljs-attr">outputs</span>: [{ <span class="hljs-attr">name</span>: <span class="hljs-string">""</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"bool"</span> }],
      <span class="hljs-attr">payable</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">stateMutability</span>: <span class="hljs-string">"view"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"function"</span>
    },
    {
      <span class="hljs-attr">constant</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">inputs</span>: [{ <span class="hljs-attr">name</span>: <span class="hljs-string">"_swapID"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"bytes32"</span> }],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"queryOpenSwap"</span>,
      <span class="hljs-attr">outputs</span>: [
        { <span class="hljs-attr">name</span>: <span class="hljs-string">"_randomNumberHash"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"bytes32"</span> },
        { <span class="hljs-attr">name</span>: <span class="hljs-string">"_timestamp"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"uint64"</span> },
        { <span class="hljs-attr">name</span>: <span class="hljs-string">"_expireHeight"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"uint256"</span> },
        { <span class="hljs-attr">name</span>: <span class="hljs-string">"_outAmount"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"uint256"</span> },
        { <span class="hljs-attr">name</span>: <span class="hljs-string">"_sender"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"address"</span> },
        { <span class="hljs-attr">name</span>: <span class="hljs-string">"_recipient"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"address"</span> }
      ],
      <span class="hljs-attr">payable</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">stateMutability</span>: <span class="hljs-string">"view"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"function"</span>
    },
    {
      <span class="hljs-attr">inputs</span>: [{ <span class="hljs-attr">name</span>: <span class="hljs-string">"_erc20Contract"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"address"</span> }],
      <span class="hljs-attr">payable</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">stateMutability</span>: <span class="hljs-string">"nonpayable"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"constructor"</span>
    },
    {
      <span class="hljs-attr">anonymous</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">inputs</span>: [
        { <span class="hljs-attr">indexed</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"_msgSender"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"address"</span> },
        { <span class="hljs-attr">indexed</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"_recipientAddr"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"address"</span> },
        { <span class="hljs-attr">indexed</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"_swapID"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"bytes32"</span> },
        { <span class="hljs-attr">indexed</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"_randomNumberHash"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"bytes32"</span> },
        { <span class="hljs-attr">indexed</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"_timestamp"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"uint64"</span> },
        { <span class="hljs-attr">indexed</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"_bep2Addr"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"bytes20"</span> },
        { <span class="hljs-attr">indexed</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"_expireHeight"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"uint256"</span> },
        { <span class="hljs-attr">indexed</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"_outAmount"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"uint256"</span> },
        { <span class="hljs-attr">indexed</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"_bep2Amount"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"uint256"</span> }
      ],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"HTLT"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"event"</span>
    },
    {
      <span class="hljs-attr">anonymous</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">inputs</span>: [
        { <span class="hljs-attr">indexed</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"_msgSender"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"address"</span> },
        { <span class="hljs-attr">indexed</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"_recipientAddr"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"address"</span> },
        { <span class="hljs-attr">indexed</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"_swapID"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"bytes32"</span> },
        { <span class="hljs-attr">indexed</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"_randomNumberHash"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"bytes32"</span> }
      ],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"Refunded"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"event"</span>
    },
    {
      <span class="hljs-attr">anonymous</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">inputs</span>: [
        { <span class="hljs-attr">indexed</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"_msgSender"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"address"</span> },
        { <span class="hljs-attr">indexed</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"_recipientAddr"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"address"</span> },
        { <span class="hljs-attr">indexed</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"_swapID"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"bytes32"</span> },
        { <span class="hljs-attr">indexed</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"_randomNumberHash"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"bytes32"</span> },
        { <span class="hljs-attr">indexed</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"_randomNumber"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"bytes32"</span> }
      ],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"Claimed"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"event"</span>
    }
  ],
  swapContractAddr
);

<span class="hljs-comment">//--------------------------------------------</span>
<span class="hljs-comment">//Step1 approve erc20 to swap contract address</span>
<span class="hljs-comment">//--------------------------------------------</span>
<span class="hljs-keyword">const</span> approveData = erc20Contract.methods
  .increaseAllowance(swapContractAddr, <span class="hljs-number">10000000000</span>)
  .encodeABI();
<span class="hljs-keyword">let</span> nonce = <span class="hljs-keyword">await</span> web3.eth.getTransactionCount(clientEthWalletAddr, <span class="hljs-string">"pending"</span>);
<span class="hljs-keyword">let</span> gasPrice = <span class="hljs-keyword">await</span> web3.eth.getGasPrice();
<span class="hljs-keyword">let</span> gasLimit = <span class="hljs-number">3000000</span>;
<span class="hljs-keyword">let</span> rawTx = {
  <span class="hljs-attr">nonce</span>: web3.utils.toHex(nonce),
  <span class="hljs-attr">gasPrice</span>: web3.utils.toHex(gasPrice),
  <span class="hljs-attr">gasLimit</span>: web3.utils.toHex(gasLimit),
  <span class="hljs-attr">to</span>: erc20ContractAddr,
  <span class="hljs-attr">value</span>: <span class="hljs-string">"0x00"</span>,
  <span class="hljs-attr">data</span>: approveData
};
<span class="hljs-keyword">var</span> ethereumjs = <span class="hljs-built_in">require</span>(<span class="hljs-string">"ethereumjs-tx"</span>);
<span class="hljs-keyword">var</span> signTx = <span class="hljs-keyword">new</span> ethereumjs(rawTx);
signTx.sign(clientEthWalletKey);
<span class="hljs-keyword">var</span> serializedTx = signTx.serialize();
web3.eth
  .sendSignedTransaction(<span class="hljs-string">"0x"</span> + serializedTx.toString(<span class="hljs-string">"hex"</span>))
  .on(<span class="hljs-string">"receipt"</span>, <span class="hljs-built_in">console</span>.log);
<span class="hljs-keyword">await</span> wait(<span class="hljs-number">20000</span>);
<span class="hljs-comment">//----------------------------------------------------------------------------</span>
<span class="hljs-comment">//Step2 call swap contract to send htlt transaction on Ethereum</span>
<span class="hljs-comment">//----------------------------------------------------------------------------</span>
<span class="hljs-keyword">const</span> randomNumber =
  <span class="hljs-string">"e8eae926261ab77d018202434791a335249b470246a7b02e28c3b2fb6ffad8f3"</span>;
<span class="hljs-keyword">const</span> timestamp = <span class="hljs-built_in">Math</span>.floor(<span class="hljs-built_in">Date</span>.now() / <span class="hljs-number">1000</span>);
<span class="hljs-keyword">const</span> randomNumberHash = calculateRandomNumberHash(
  randomNumber,
  timestamp
).toString(<span class="hljs-string">"hex"</span>);
<span class="hljs-keyword">const</span> heightSpan = <span class="hljs-number">1000</span>;
<span class="hljs-keyword">const</span> hexEncodingClientBNBaddr =
  <span class="hljs-string">"0x"</span> + crypto.decodeAddress(clientBnbWalletAddr).toString(<span class="hljs-string">"hex"</span>);
<span class="hljs-keyword">const</span> amount = <span class="hljs-number">10000000000</span>; <span class="hljs-comment">// 10000000000:PPC， decimal is 10</span>
<span class="hljs-keyword">const</span> expectedIncome = <span class="hljs-number">99999000</span>; <span class="hljs-comment">//"99999000:PPC-00A", decimal is 8, deputy will deduct swap fee, the swap fee is 1000:PPC-00A</span>

<span class="hljs-keyword">const</span> htltData = swapContract.methods
  .htlt(
    <span class="hljs-string">"0x"</span> + randomNumberHash,
    timestamp,
    heightSpan,
    deputyEthWalletAddr,
    <span class="hljs-string">"0x0"</span>,
    hexEncodingClientBNBaddr,
    amount,
    expectedIncome
  )
  .encodeABI();
nonce = <span class="hljs-keyword">await</span> web3.eth.getTransactionCount(clientEthWalletAddr, <span class="hljs-string">"pending"</span>);
gasPrice = <span class="hljs-keyword">await</span> web3.eth.getGasPrice();
gasLimit = <span class="hljs-number">3000000</span>;
rawTx = {
  <span class="hljs-attr">nonce</span>: web3.utils.toHex(nonce),
  <span class="hljs-attr">gasPrice</span>: web3.utils.toHex(gasPrice),
  <span class="hljs-attr">gasLimit</span>: web3.utils.toHex(gasLimit),
  <span class="hljs-attr">to</span>: swapContractAddr,
  <span class="hljs-attr">value</span>: <span class="hljs-string">"0x00"</span>,
  <span class="hljs-attr">data</span>: htltData
};
ethereumjs = <span class="hljs-built_in">require</span>(<span class="hljs-string">"ethereumjs-tx"</span>);
signTx = <span class="hljs-keyword">new</span> ethereumjs(rawTx);
signTx.sign(clientEthWalletKey);
serializedTx = signTx.serialize();
web3.eth
  .sendSignedTransaction(<span class="hljs-string">"0x"</span> + serializedTx.toString(<span class="hljs-string">"hex"</span>))
  .on(<span class="hljs-string">"receipt"</span>, <span class="hljs-built_in">console</span>.log);
<span class="hljs-keyword">await</span> wait(<span class="hljs-number">20000</span>);

<span class="hljs-comment">//----------------------------------------------------------------------------</span>
<span class="hljs-comment">//Step3 query swap created by deputy on Binance Chain and verify swap parameters</span>
<span class="hljs-comment">//----------------------------------------------------------------------------</span>
<span class="hljs-keyword">const</span> swapID = calculateSwapID(
  randomNumberHash.replace(<span class="hljs-string">"0x"</span>, <span class="hljs-string">""</span>),
  deputyBNBWalletAddr,
  clientEthWalletAddr
).toString();
<span class="hljs-built_in">console</span>.log(swapID);
<span class="hljs-keyword">let</span> atomicSwapList = <span class="hljs-keyword">await</span> bnbClient.getSwapByRecipient(
  clientBnbWalletAddr,
  <span class="hljs-number">1000</span>,
  <span class="hljs-number">0</span>
);
<span class="hljs-keyword">while</span> (atomicSwapList.result.atomicSwaps[<span class="hljs-number">0</span>].swapId != swapID) {
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Waiting for the atomic swap created by deputy"</span>);
  <span class="hljs-keyword">await</span> wait(<span class="hljs-number">5000</span>);
  atomicSwapList = <span class="hljs-keyword">await</span> bnbClient.getSwapByRecipient(
    clientBnbWalletAddr,
    <span class="hljs-number">1000</span>,
    <span class="hljs-number">0</span>
  );
}
<span class="hljs-keyword">const</span> atomicSwap = <span class="hljs-keyword">await</span> bnbClient.getSwapByID(swapID);
<span class="hljs-built_in">console</span>.log(atomicSwap);
<span class="hljs-keyword">const</span> status = <span class="hljs-keyword">await</span> bnbRPC.status();
expect(atomicSwap.result.toAddr).toBe(clientBnbWalletAddr);
expect(atomicSwap.result.randomNumberHash).toBe(
  randomNumberHash.replace(<span class="hljs-string">"0x"</span>, <span class="hljs-string">""</span>)
);
expect(atomicSwap.result.timestamp).toBe(timestamp);
expect(atomicSwap.result.outAmount).toBe(<span class="hljs-string">"99999000:PPC-00A"</span>);
expect(<span class="hljs-built_in">Number</span>(atomicSwap.result.expireHeight)).toBeGreaterThan(
  <span class="hljs-built_in">Number</span>(status.sync_info.latest_block_height) + <span class="hljs-number">100</span>
);

<span class="hljs-comment">//----------------------------------------------------------------------------</span>
<span class="hljs-comment">//Step4 claim on Binance chain</span>
<span class="hljs-comment">//----------------------------------------------------------------------------</span>
<span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> bnbClient.swap.claimHTLT(
  clientBnbWalletAddr,
  swapID,
  randomNumber
);
<span class="hljs-built_in">console</span>.log(res);

<span class="hljs-comment">//----------------------------------------------------------------------------</span>
<span class="hljs-comment">//If step3 or step4 are failed and the expire height on Ethereum is passed, try to call refund method on Ethereum</span>
<span class="hljs-comment">//----------------------------------------------------------------------------</span>
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="swap-tokens-from-binance-chain-to-ethereum"></a><a href="#swap-tokens-from-binance-chain-to-ethereum" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Swap Tokens from Binance Chain to Ethereum</h3>
<p><img src="/docs-site/docs/assets/bnc2eth.png" alt="image-20190918193910521"></p>
<h4><a class="anchor" aria-hidden="true" id="1-send-htlt-transaction-from-binance-chain"></a><a href="#1-send-htlt-transaction-from-binance-chain" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1. Send <code>HTLT</code> Transaction from Binance Chain</h4>
<p>Please read this <a href="#hash-timer-locked-transfer">section</a> to generate a valid <code>HTLT</code> transaction. Please write down the <code>randomNumber</code> and <code>randomNumberHash</code>.</p>
<pre><code class="hljs">./tbnbcli token HTLT --<span class="hljs-keyword">from</span> atomic --recipient-addr tbnb1pk45lc2k7lmf0pnfa59l0uhwrvpk8shsema7gr  --chain-id Binance-Chain-Nile  --height-span <span class="hljs-number">10000</span> --amount  <span class="hljs-number">9900000000</span>:PPC<span class="hljs-number">-00</span>A  --expected-income <span class="hljs-number">9900000000</span>:PPC  --recipient-other-chain <span class="hljs-number">0x133D144F52705cEb3f5801B63b9EBcCF4102f5Ed</span>  --cross-chain --trust-node --node http:<span class="hljs-comment">//data-seed-pre-0-s3.binance.org:80</span>
Random number: <span class="hljs-number">4811959406</span>ea3e69721d944d308880ec41323b7f89e51a78df3693348779315e
Timestamp: <span class="hljs-number">1569578936</span>
Random number hash: b03f256c9efdb97b9815faa1417e1da4cca7672e0bb26e4e7d9bfc82d0f1f15e
Committed at block <span class="hljs-number">634510</span> (
    tx hash: <span class="hljs-number">9</span>DEF124E12DE123BA1CC75AA6E68F20CC48EBBE9D7693CE4D0416267C6C0F159,
    response: {
        Code:<span class="hljs-number">0</span> Data:[<span class="hljs-number">229</span> <span class="hljs-number">50</span> <span class="hljs-number">241</span> <span class="hljs-number">60</span> <span class="hljs-number">76</span> <span class="hljs-number">91</span> <span class="hljs-number">112</span> <span class="hljs-number">146</span> <span class="hljs-number">93</span> <span class="hljs-number">68</span> <span class="hljs-number">100</span> <span class="hljs-number">222</span> <span class="hljs-number">83</span> <span class="hljs-number">84</span> <span class="hljs-number">180</span> <span class="hljs-number">133</span> <span class="hljs-number">181</span> <span class="hljs-number">151</span> <span class="hljs-number">241</span> <span class="hljs-number">174</span> <span class="hljs-number">93</span> <span class="hljs-number">125</span> <span class="hljs-number">132</span> <span class="hljs-number">82</span> <span class="hljs-number">245</span> <span class="hljs-number">198</span> <span class="hljs-number">5</span> <span class="hljs-number">66</span> <span class="hljs-number">0</span> <span class="hljs-number">123</span> <span class="hljs-number">32</span> <span class="hljs-number">113</span>]
        Log:Msg <span class="hljs-number">0</span>: swapID: f85dd907df0a5897927b949c0f9e2563d453ba698ff9941fed1ce91f8057afc2
        ...
)
</code></pre>
<blockquote>
<p>Note: the swap amount must be positive.</p>
</blockquote>
<p>Please write down the <code>random number</code>, <code>random number hash</code>, <code>swapID</code> and <code>timestamp</code> for next steps.</p>
<p>Example is <a href="https://testnet-explorer.binance.org/tx/9ECECE9E0F08EE78583CFA37FD4C3F03521289F0F229A612886B8B21B9C62D7F">here</a></p>
<p>Then, you can query the the swap by <code>SwapID</code>:</p>
<pre><code class="hljs"><span class="hljs-string">./tbnbcli</span> token query-swap <span class="hljs-params">--swap-id</span> f85dd907df0a5897927b949c0f9e2563d453ba698ff9941fed1ce91f8057afc2 <span class="hljs-params">--chain-id</span> Binance-Chain-Nile <span class="hljs-params">--trust-node</span> <span class="hljs-params">--node</span> http:<span class="hljs-string">//data-seed-pre-0-s3.binance.org</span><span class="hljs-function">:80</span>
</code></pre>
<p>You can use this <code>swapID</code> for refund if the deputy doesn't send htlt transaction on ethereum with proper parameters.</p>
<h4><a class="anchor" aria-hidden="true" id="2-deputy-approve-tokens"></a><a href="#2-deputy-approve-tokens" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2. Deputy Approve Tokens</h4>
<p>You should see that <strong>Deputy</strong> has approve enough amount of tokens for atomic swap.</p>
<h4><a class="anchor" aria-hidden="true" id="3-deputy-send-htlt-on-ethereum"></a><a href="#3-deputy-send-htlt-on-ethereum" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3. Deputy Send HTLT on Ethereum</h4>
<p>You should see that <strong>Deputy</strong> has sent the <code>htlt</code> <a href="https://ropsten.etherscan.io/tx/0x142fb8db7eb66feb241ca710a028678e36595fc8aea03858672288fcac8e4494">transaction</a> afterwards</p>
<p>To get the <code>swapID</code> on Ethereum, you can check this <a href="https://ropsten.etherscan.io/tx/0x142fb8db7eb66feb241ca710a028678e36595fc8aea03858672288fcac8e4494#eventlog">page</a>
<strong>0xd3bacf63906af5459ead39f27cae189e2f3e76fda34523714a4c61d76c79ee4e</strong> is the <code>swapID</code> on Ethereum.</p>
<h4><a class="anchor" aria-hidden="true" id="4-claim-erc20-tokens-on-ethereum"></a><a href="#4-claim-erc20-tokens-on-ethereum" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>4. Claim ERC20 Tokens on Ethereum</h4>
<p>You should see that <strong>Deputy</strong> has already approved enough tokens and</p>
<p>In its <a href="https://ropsten.etherscan.io/tx/0x142fb8db7eb66feb241ca710a028678e36595fc8aea03858672288fcac8e4494#eventlog">event log</a>, you should see the <code>swapID</code>. Before calling <code>claim</code> function on ethereum, clients should verify the parameters in the <code>HTLT</code> event.</p>
<ul>
<li><code>_randomNumberHash</code> must equal to the randomNumberHash in client HTLT transaction on Binance Chain</li>
<li><code>_recipientAddr</code> must equal to client ethereum wallet address</li>
<li><code>_timestamp</code> must equal to the timestamp in client HTLT transaction on Binance Chain</li>
<li><code>_outAmount</code> should be reasonable. Please note that the decimals erc20 contract and deputy will deduct some fees.</li>
<li><code>_expireHeight</code> must not be passed and should be enough for send claim transaction</li>
</ul>
<p>Then, you can call the <code>claim</code> function:</p>
<ul>
<li>Function: <em>claim</em></li>
<li>Prameters:
<ul>
<li>_swapID: this is get from event, you can also calculate it from <code>calSwapID</code> function in the contract. calSwapID(randomNumberHash, {deputy ethereum address}, {hex encoding client binance address})</li>
<li>_randomNumber: reveal your randomNumber</li>
</ul></li>
</ul>
<p>Example is <a href="https://ropsten.etherscan.io/tx/0x9cf7cc7891b86987c4eef59e3b4950324d656e6937a38b91786894f52c76f41b">here</a></p>
<h4><a class="anchor" aria-hidden="true" id="5-deputy-claim-on-binance-chain"></a><a href="#5-deputy-claim-on-binance-chain" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>5. Deputy Claim on Binance Chain</h4>
<p><code>Claim HTLT</code> transaction from <strong>Deputy</strong> is <a href="https://testnet-explorer.binance.org/tx/8C616DEFD2EAA41E13D2DC4844B218DFF8CFE24B4C7A693AAD700381B5FF7B48">sent</a> afterwards:</p>
<h4><a class="anchor" aria-hidden="true" id="6-demo-for-client-app-swap-bep2-to-erc20"></a><a href="#6-demo-for-client-app-swap-bep2-to-erc20" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>6. Demo for Client APP: swap bep2 to erc20</h4>
<p>This is a javascript implementation for client app to swap <a href="https://testnet-explorer.binance.org/asset/PPC-00A">PPC-00A</a> to <a href="https://ropsten.etherscan.io/address/0xd93395b2771914e1679155f3ea58c41d89d96098">PPC</a> with deputy.</p>
<pre><code class="hljs css language-javascript"><span class="hljs-keyword">const</span> erc20ContractAddr = <span class="hljs-string">"0xd93395b2771914e1679155f3ea58c41d89d96098"</span>;
<span class="hljs-keyword">const</span> swapContractAddr = <span class="hljs-string">"0x12DCBf79BE178479870A473A99d91f535ed960AD"</span>;

<span class="hljs-keyword">const</span> deputyEthWalletAddr = <span class="hljs-string">"0x1C002969Fe201975eD8F054916b071672326858e"</span>;
<span class="hljs-keyword">const</span> deputyBNBWalletAddr = <span class="hljs-string">"tbnb1pk45lc2k7lmf0pnfa59l0uhwrvpk8shsema7gr"</span>;

<span class="hljs-keyword">const</span> clientEthWalletAddr = <span class="hljs-string">"0xfA5E36a04EeF3152092099F352DDbe88953bB540"</span>;
<span class="hljs-keyword">const</span> clientEthWalletKey = <span class="hljs-keyword">new</span> Buffer(
  <span class="hljs-string">"89A0F0E0732ACAA7AD37C9E6D7A9798ECCE6940C63FF0290A58B1C1C1697486A"</span>,
  <span class="hljs-string">"hex"</span>
);

<span class="hljs-keyword">const</span> clientBnbWalletAddr = <span class="hljs-string">"tbnb17vwyu8npjj5pywh3keq2lm7d4v76n434pwd8av"</span>;
<span class="hljs-keyword">const</span> clientBnbWalletMnemonic =
  <span class="hljs-string">"lawsuit margin siege phrase fabric matrix like picnic day thrive correct velvet stool type broom upon flee fee ten senior install wrestle soap sick"</span>;

<span class="hljs-keyword">const</span> web3 = <span class="hljs-keyword">new</span> Web3(
  <span class="hljs-keyword">new</span> Web3.providers.HttpProvider(
    <span class="hljs-string">"https://ropsten.infura.io/v3/1c5b38a27f92410cb5feb13b6efb2e14"</span>
  )
);
<span class="hljs-keyword">const</span> bnbClient = <span class="hljs-keyword">new</span> BncClient(<span class="hljs-string">"https://testnet-dex.binance.org"</span>);
<span class="hljs-keyword">await</span> bnbClient.initChain();
bnbClient.setPrivateKey(
  crypto.getPrivateKeyFromMnemonic(clientBnbWalletMnemonic)
);
bnbClient.useDefaultSigningDelegate();
bnbClient.useDefaultBroadcastDelegate();
<span class="hljs-keyword">const</span> bnbRPC = <span class="hljs-keyword">new</span> rpcClient(<span class="hljs-string">"https://seed-pre-s3.binance.org"</span>, <span class="hljs-string">"testnet"</span>);

<span class="hljs-keyword">const</span> erc20Contract = <span class="hljs-keyword">new</span> web3.eth.Contract(
  [
    {
      <span class="hljs-attr">constant</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">inputs</span>: [],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"name"</span>,
      <span class="hljs-attr">outputs</span>: [{ <span class="hljs-attr">name</span>: <span class="hljs-string">""</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"string"</span> }],
      <span class="hljs-attr">payable</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">stateMutability</span>: <span class="hljs-string">"view"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"function"</span>
    },
    {
      <span class="hljs-attr">constant</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">inputs</span>: [
        { <span class="hljs-attr">name</span>: <span class="hljs-string">"_spender"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"address"</span> },
        { <span class="hljs-attr">name</span>: <span class="hljs-string">"_value"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"uint256"</span> }
      ],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"approve"</span>,
      <span class="hljs-attr">outputs</span>: [{ <span class="hljs-attr">name</span>: <span class="hljs-string">"success"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"bool"</span> }],
      <span class="hljs-attr">payable</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">stateMutability</span>: <span class="hljs-string">"nonpayable"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"function"</span>
    },
    {
      <span class="hljs-attr">constant</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">inputs</span>: [{ <span class="hljs-attr">name</span>: <span class="hljs-string">"_evilUser"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"address"</span> }],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"addBlackList"</span>,
      <span class="hljs-attr">outputs</span>: [],
      <span class="hljs-attr">payable</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">stateMutability</span>: <span class="hljs-string">"nonpayable"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"function"</span>
    },
    {
      <span class="hljs-attr">constant</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">inputs</span>: [],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"totalSupply"</span>,
      <span class="hljs-attr">outputs</span>: [{ <span class="hljs-attr">name</span>: <span class="hljs-string">""</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"uint256"</span> }],
      <span class="hljs-attr">payable</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">stateMutability</span>: <span class="hljs-string">"view"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"function"</span>
    },
    {
      <span class="hljs-attr">constant</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">inputs</span>: [
        { <span class="hljs-attr">name</span>: <span class="hljs-string">"_from"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"address"</span> },
        { <span class="hljs-attr">name</span>: <span class="hljs-string">"_to"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"address"</span> },
        { <span class="hljs-attr">name</span>: <span class="hljs-string">"_value"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"uint256"</span> }
      ],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"transferFrom"</span>,
      <span class="hljs-attr">outputs</span>: [{ <span class="hljs-attr">name</span>: <span class="hljs-string">"success"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"bool"</span> }],
      <span class="hljs-attr">payable</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">stateMutability</span>: <span class="hljs-string">"nonpayable"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"function"</span>
    },
    {
      <span class="hljs-attr">constant</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">inputs</span>: [],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"decimals"</span>,
      <span class="hljs-attr">outputs</span>: [{ <span class="hljs-attr">name</span>: <span class="hljs-string">""</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"uint8"</span> }],
      <span class="hljs-attr">payable</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">stateMutability</span>: <span class="hljs-string">"view"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"function"</span>
    },
    {
      <span class="hljs-attr">constant</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">inputs</span>: [
        { <span class="hljs-attr">name</span>: <span class="hljs-string">"_spender"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"address"</span> },
        { <span class="hljs-attr">name</span>: <span class="hljs-string">"_addedValue"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"uint256"</span> }
      ],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"increaseAllowance"</span>,
      <span class="hljs-attr">outputs</span>: [{ <span class="hljs-attr">name</span>: <span class="hljs-string">"success"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"bool"</span> }],
      <span class="hljs-attr">payable</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">stateMutability</span>: <span class="hljs-string">"nonpayable"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"function"</span>
    },
    {
      <span class="hljs-attr">constant</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">inputs</span>: [],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"unpause"</span>,
      <span class="hljs-attr">outputs</span>: [],
      <span class="hljs-attr">payable</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">stateMutability</span>: <span class="hljs-string">"nonpayable"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"function"</span>
    },
    {
      <span class="hljs-attr">constant</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">inputs</span>: [{ <span class="hljs-attr">name</span>: <span class="hljs-string">"account"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"address"</span> }],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"isPauser"</span>,
      <span class="hljs-attr">outputs</span>: [{ <span class="hljs-attr">name</span>: <span class="hljs-string">""</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"bool"</span> }],
      <span class="hljs-attr">payable</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">stateMutability</span>: <span class="hljs-string">"view"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"function"</span>
    },
    {
      <span class="hljs-attr">constant</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">inputs</span>: [{ <span class="hljs-attr">name</span>: <span class="hljs-string">"_maker"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"address"</span> }],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"getBlackListStatus"</span>,
      <span class="hljs-attr">outputs</span>: [{ <span class="hljs-attr">name</span>: <span class="hljs-string">""</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"bool"</span> }],
      <span class="hljs-attr">payable</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">stateMutability</span>: <span class="hljs-string">"view"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"function"</span>
    },
    {
      <span class="hljs-attr">constant</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">inputs</span>: [],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"paused"</span>,
      <span class="hljs-attr">outputs</span>: [{ <span class="hljs-attr">name</span>: <span class="hljs-string">""</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"bool"</span> }],
      <span class="hljs-attr">payable</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">stateMutability</span>: <span class="hljs-string">"view"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"function"</span>
    },
    {
      <span class="hljs-attr">constant</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">inputs</span>: [],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"renouncePauser"</span>,
      <span class="hljs-attr">outputs</span>: [],
      <span class="hljs-attr">payable</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">stateMutability</span>: <span class="hljs-string">"nonpayable"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"function"</span>
    },
    {
      <span class="hljs-attr">constant</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">inputs</span>: [{ <span class="hljs-attr">name</span>: <span class="hljs-string">"who"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"address"</span> }],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"balanceOf"</span>,
      <span class="hljs-attr">outputs</span>: [{ <span class="hljs-attr">name</span>: <span class="hljs-string">""</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"uint256"</span> }],
      <span class="hljs-attr">payable</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">stateMutability</span>: <span class="hljs-string">"view"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"function"</span>
    },
    {
      <span class="hljs-attr">constant</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">inputs</span>: [],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"renounceOwnership"</span>,
      <span class="hljs-attr">outputs</span>: [],
      <span class="hljs-attr">payable</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">stateMutability</span>: <span class="hljs-string">"nonpayable"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"function"</span>
    },
    {
      <span class="hljs-attr">constant</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">inputs</span>: [{ <span class="hljs-attr">name</span>: <span class="hljs-string">"account"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"address"</span> }],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"addPauser"</span>,
      <span class="hljs-attr">outputs</span>: [],
      <span class="hljs-attr">payable</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">stateMutability</span>: <span class="hljs-string">"nonpayable"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"function"</span>
    },
    {
      <span class="hljs-attr">constant</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">inputs</span>: [],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"pause"</span>,
      <span class="hljs-attr">outputs</span>: [],
      <span class="hljs-attr">payable</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">stateMutability</span>: <span class="hljs-string">"nonpayable"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"function"</span>
    },
    {
      <span class="hljs-attr">constant</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">inputs</span>: [],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"owner"</span>,
      <span class="hljs-attr">outputs</span>: [{ <span class="hljs-attr">name</span>: <span class="hljs-string">""</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"address"</span> }],
      <span class="hljs-attr">payable</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">stateMutability</span>: <span class="hljs-string">"view"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"function"</span>
    },
    {
      <span class="hljs-attr">constant</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">inputs</span>: [],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"isOwner"</span>,
      <span class="hljs-attr">outputs</span>: [{ <span class="hljs-attr">name</span>: <span class="hljs-string">""</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"bool"</span> }],
      <span class="hljs-attr">payable</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">stateMutability</span>: <span class="hljs-string">"view"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"function"</span>
    },
    {
      <span class="hljs-attr">constant</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">inputs</span>: [],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"symbol"</span>,
      <span class="hljs-attr">outputs</span>: [{ <span class="hljs-attr">name</span>: <span class="hljs-string">""</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"string"</span> }],
      <span class="hljs-attr">payable</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">stateMutability</span>: <span class="hljs-string">"view"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"function"</span>
    },
    {
      <span class="hljs-attr">constant</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">inputs</span>: [
        { <span class="hljs-attr">name</span>: <span class="hljs-string">"_spender"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"address"</span> },
        { <span class="hljs-attr">name</span>: <span class="hljs-string">"_subtractedValue"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"uint256"</span> }
      ],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"decreaseAllowance"</span>,
      <span class="hljs-attr">outputs</span>: [{ <span class="hljs-attr">name</span>: <span class="hljs-string">"success"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"bool"</span> }],
      <span class="hljs-attr">payable</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">stateMutability</span>: <span class="hljs-string">"nonpayable"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"function"</span>
    },
    {
      <span class="hljs-attr">constant</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">inputs</span>: [
        { <span class="hljs-attr">name</span>: <span class="hljs-string">"_to"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"address"</span> },
        { <span class="hljs-attr">name</span>: <span class="hljs-string">"_value"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"uint256"</span> }
      ],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"transfer"</span>,
      <span class="hljs-attr">outputs</span>: [{ <span class="hljs-attr">name</span>: <span class="hljs-string">"success"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"bool"</span> }],
      <span class="hljs-attr">payable</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">stateMutability</span>: <span class="hljs-string">"nonpayable"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"function"</span>
    },
    {
      <span class="hljs-attr">constant</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">inputs</span>: [{ <span class="hljs-attr">name</span>: <span class="hljs-string">"amount"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"uint256"</span> }],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"issue"</span>,
      <span class="hljs-attr">outputs</span>: [],
      <span class="hljs-attr">payable</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">stateMutability</span>: <span class="hljs-string">"nonpayable"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"function"</span>
    },
    {
      <span class="hljs-attr">constant</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">inputs</span>: [{ <span class="hljs-attr">name</span>: <span class="hljs-string">"amount"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"uint256"</span> }],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"redeem"</span>,
      <span class="hljs-attr">outputs</span>: [],
      <span class="hljs-attr">payable</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">stateMutability</span>: <span class="hljs-string">"nonpayable"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"function"</span>
    },
    {
      <span class="hljs-attr">constant</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">inputs</span>: [
        { <span class="hljs-attr">name</span>: <span class="hljs-string">"_owner"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"address"</span> },
        { <span class="hljs-attr">name</span>: <span class="hljs-string">"_spender"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"address"</span> }
      ],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"allowance"</span>,
      <span class="hljs-attr">outputs</span>: [{ <span class="hljs-attr">name</span>: <span class="hljs-string">"remaining"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"uint256"</span> }],
      <span class="hljs-attr">payable</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">stateMutability</span>: <span class="hljs-string">"view"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"function"</span>
    },
    {
      <span class="hljs-attr">constant</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">inputs</span>: [{ <span class="hljs-attr">name</span>: <span class="hljs-string">""</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"address"</span> }],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"isBlackListed"</span>,
      <span class="hljs-attr">outputs</span>: [{ <span class="hljs-attr">name</span>: <span class="hljs-string">""</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"bool"</span> }],
      <span class="hljs-attr">payable</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">stateMutability</span>: <span class="hljs-string">"view"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"function"</span>
    },
    {
      <span class="hljs-attr">constant</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">inputs</span>: [{ <span class="hljs-attr">name</span>: <span class="hljs-string">"_clearedUser"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"address"</span> }],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"removeBlackList"</span>,
      <span class="hljs-attr">outputs</span>: [],
      <span class="hljs-attr">payable</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">stateMutability</span>: <span class="hljs-string">"nonpayable"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"function"</span>
    },
    {
      <span class="hljs-attr">constant</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">inputs</span>: [{ <span class="hljs-attr">name</span>: <span class="hljs-string">"newOwner"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"address"</span> }],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"transferOwnership"</span>,
      <span class="hljs-attr">outputs</span>: [],
      <span class="hljs-attr">payable</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">stateMutability</span>: <span class="hljs-string">"nonpayable"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"function"</span>
    },
    {
      <span class="hljs-attr">constant</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">inputs</span>: [{ <span class="hljs-attr">name</span>: <span class="hljs-string">"_blackListedUser"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"address"</span> }],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"destroyBlackFunds"</span>,
      <span class="hljs-attr">outputs</span>: [],
      <span class="hljs-attr">payable</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">stateMutability</span>: <span class="hljs-string">"nonpayable"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"function"</span>
    },
    {
      <span class="hljs-attr">inputs</span>: [
        { <span class="hljs-attr">name</span>: <span class="hljs-string">"_initialSupply"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"uint256"</span> },
        { <span class="hljs-attr">name</span>: <span class="hljs-string">"_name"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"string"</span> },
        { <span class="hljs-attr">name</span>: <span class="hljs-string">"_symbol"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"string"</span> },
        { <span class="hljs-attr">name</span>: <span class="hljs-string">"_decimals"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"uint8"</span> }
      ],
      <span class="hljs-attr">payable</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">stateMutability</span>: <span class="hljs-string">"nonpayable"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"constructor"</span>
    },
    {
      <span class="hljs-attr">anonymous</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">inputs</span>: [{ <span class="hljs-attr">indexed</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"amount"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"uint256"</span> }],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"Issue"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"event"</span>
    },
    {
      <span class="hljs-attr">anonymous</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">inputs</span>: [{ <span class="hljs-attr">indexed</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"amount"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"uint256"</span> }],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"Redeem"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"event"</span>
    },
    {
      <span class="hljs-attr">anonymous</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">inputs</span>: [
        { <span class="hljs-attr">indexed</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"_blackListedUser"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"address"</span> },
        { <span class="hljs-attr">indexed</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"_balance"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"uint256"</span> }
      ],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"DestroyedBlackFunds"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"event"</span>
    },
    {
      <span class="hljs-attr">anonymous</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">inputs</span>: [{ <span class="hljs-attr">indexed</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"_user"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"address"</span> }],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"AddedBlackList"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"event"</span>
    },
    {
      <span class="hljs-attr">anonymous</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">inputs</span>: [{ <span class="hljs-attr">indexed</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"_user"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"address"</span> }],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"RemovedBlackList"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"event"</span>
    },
    {
      <span class="hljs-attr">anonymous</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">inputs</span>: [{ <span class="hljs-attr">indexed</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"account"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"address"</span> }],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"Paused"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"event"</span>
    },
    {
      <span class="hljs-attr">anonymous</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">inputs</span>: [{ <span class="hljs-attr">indexed</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"account"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"address"</span> }],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"Unpaused"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"event"</span>
    },
    {
      <span class="hljs-attr">anonymous</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">inputs</span>: [
        { <span class="hljs-attr">indexed</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"from"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"address"</span> },
        { <span class="hljs-attr">indexed</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"to"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"address"</span> },
        { <span class="hljs-attr">indexed</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"value"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"uint256"</span> }
      ],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"Transfer"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"event"</span>
    },
    {
      <span class="hljs-attr">anonymous</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">inputs</span>: [
        { <span class="hljs-attr">indexed</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"owner"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"address"</span> },
        { <span class="hljs-attr">indexed</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"spender"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"address"</span> },
        { <span class="hljs-attr">indexed</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"value"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"uint256"</span> }
      ],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"Approval"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"event"</span>
    },
    {
      <span class="hljs-attr">anonymous</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">inputs</span>: [
        { <span class="hljs-attr">indexed</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"previousOwner"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"address"</span> },
        { <span class="hljs-attr">indexed</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"newOwner"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"address"</span> }
      ],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"OwnershipTransferred"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"event"</span>
    },
    {
      <span class="hljs-attr">anonymous</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">inputs</span>: [{ <span class="hljs-attr">indexed</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"account"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"address"</span> }],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"PauserAdded"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"event"</span>
    },
    {
      <span class="hljs-attr">anonymous</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">inputs</span>: [{ <span class="hljs-attr">indexed</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"account"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"address"</span> }],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"PauserRemoved"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"event"</span>
    }
  ],
  erc20ContractAddr
);
<span class="hljs-keyword">const</span> swapContract = <span class="hljs-keyword">new</span> web3.eth.Contract(
  [
    {
      <span class="hljs-attr">constant</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">inputs</span>: [],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"ERC20ContractAddr"</span>,
      <span class="hljs-attr">outputs</span>: [{ <span class="hljs-attr">name</span>: <span class="hljs-string">""</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"address"</span> }],
      <span class="hljs-attr">payable</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">stateMutability</span>: <span class="hljs-string">"view"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"function"</span>
    },
    {
      <span class="hljs-attr">constant</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">inputs</span>: [{ <span class="hljs-attr">name</span>: <span class="hljs-string">"_swapID"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"bytes32"</span> }],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"isSwapExist"</span>,
      <span class="hljs-attr">outputs</span>: [{ <span class="hljs-attr">name</span>: <span class="hljs-string">""</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"bool"</span> }],
      <span class="hljs-attr">payable</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">stateMutability</span>: <span class="hljs-string">"view"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"function"</span>
    },
    {
      <span class="hljs-attr">constant</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">inputs</span>: [{ <span class="hljs-attr">name</span>: <span class="hljs-string">"_swapID"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"bytes32"</span> }],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"refund"</span>,
      <span class="hljs-attr">outputs</span>: [{ <span class="hljs-attr">name</span>: <span class="hljs-string">""</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"bool"</span> }],
      <span class="hljs-attr">payable</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">stateMutability</span>: <span class="hljs-string">"nonpayable"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"function"</span>
    },
    {
      <span class="hljs-attr">constant</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">inputs</span>: [
        { <span class="hljs-attr">name</span>: <span class="hljs-string">"_randomNumberHash"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"bytes32"</span> },
        { <span class="hljs-attr">name</span>: <span class="hljs-string">"_swapSender"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"address"</span> },
        { <span class="hljs-attr">name</span>: <span class="hljs-string">"_bep2SenderAddr"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"bytes20"</span> }
      ],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"calSwapID"</span>,
      <span class="hljs-attr">outputs</span>: [{ <span class="hljs-attr">name</span>: <span class="hljs-string">""</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"bytes32"</span> }],
      <span class="hljs-attr">payable</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">stateMutability</span>: <span class="hljs-string">"pure"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"function"</span>
    },
    {
      <span class="hljs-attr">constant</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">inputs</span>: [
        { <span class="hljs-attr">name</span>: <span class="hljs-string">"_swapID"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"bytes32"</span> },
        { <span class="hljs-attr">name</span>: <span class="hljs-string">"_randomNumber"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"bytes32"</span> }
      ],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"claim"</span>,
      <span class="hljs-attr">outputs</span>: [{ <span class="hljs-attr">name</span>: <span class="hljs-string">""</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"bool"</span> }],
      <span class="hljs-attr">payable</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">stateMutability</span>: <span class="hljs-string">"nonpayable"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"function"</span>
    },
    {
      <span class="hljs-attr">constant</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">inputs</span>: [
        { <span class="hljs-attr">name</span>: <span class="hljs-string">"_randomNumberHash"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"bytes32"</span> },
        { <span class="hljs-attr">name</span>: <span class="hljs-string">"_timestamp"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"uint64"</span> },
        { <span class="hljs-attr">name</span>: <span class="hljs-string">"_heightSpan"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"uint256"</span> },
        { <span class="hljs-attr">name</span>: <span class="hljs-string">"_recipientAddr"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"address"</span> },
        { <span class="hljs-attr">name</span>: <span class="hljs-string">"_bep2SenderAddr"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"bytes20"</span> },
        { <span class="hljs-attr">name</span>: <span class="hljs-string">"_bep2RecipientAddr"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"bytes20"</span> },
        { <span class="hljs-attr">name</span>: <span class="hljs-string">"_outAmount"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"uint256"</span> },
        { <span class="hljs-attr">name</span>: <span class="hljs-string">"_bep2Amount"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"uint256"</span> }
      ],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"htlt"</span>,
      <span class="hljs-attr">outputs</span>: [{ <span class="hljs-attr">name</span>: <span class="hljs-string">""</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"bool"</span> }],
      <span class="hljs-attr">payable</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">stateMutability</span>: <span class="hljs-string">"nonpayable"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"function"</span>
    },
    {
      <span class="hljs-attr">constant</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">inputs</span>: [{ <span class="hljs-attr">name</span>: <span class="hljs-string">"_swapID"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"bytes32"</span> }],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"claimable"</span>,
      <span class="hljs-attr">outputs</span>: [{ <span class="hljs-attr">name</span>: <span class="hljs-string">""</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"bool"</span> }],
      <span class="hljs-attr">payable</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">stateMutability</span>: <span class="hljs-string">"view"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"function"</span>
    },
    {
      <span class="hljs-attr">constant</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">inputs</span>: [{ <span class="hljs-attr">name</span>: <span class="hljs-string">"_swapID"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"bytes32"</span> }],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"refundable"</span>,
      <span class="hljs-attr">outputs</span>: [{ <span class="hljs-attr">name</span>: <span class="hljs-string">""</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"bool"</span> }],
      <span class="hljs-attr">payable</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">stateMutability</span>: <span class="hljs-string">"view"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"function"</span>
    },
    {
      <span class="hljs-attr">constant</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">inputs</span>: [{ <span class="hljs-attr">name</span>: <span class="hljs-string">"_swapID"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"bytes32"</span> }],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"queryOpenSwap"</span>,
      <span class="hljs-attr">outputs</span>: [
        { <span class="hljs-attr">name</span>: <span class="hljs-string">"_randomNumberHash"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"bytes32"</span> },
        { <span class="hljs-attr">name</span>: <span class="hljs-string">"_timestamp"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"uint64"</span> },
        { <span class="hljs-attr">name</span>: <span class="hljs-string">"_expireHeight"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"uint256"</span> },
        { <span class="hljs-attr">name</span>: <span class="hljs-string">"_outAmount"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"uint256"</span> },
        { <span class="hljs-attr">name</span>: <span class="hljs-string">"_sender"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"address"</span> },
        { <span class="hljs-attr">name</span>: <span class="hljs-string">"_recipient"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"address"</span> }
      ],
      <span class="hljs-attr">payable</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">stateMutability</span>: <span class="hljs-string">"view"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"function"</span>
    },
    {
      <span class="hljs-attr">inputs</span>: [{ <span class="hljs-attr">name</span>: <span class="hljs-string">"_erc20Contract"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"address"</span> }],
      <span class="hljs-attr">payable</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">stateMutability</span>: <span class="hljs-string">"nonpayable"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"constructor"</span>
    },
    {
      <span class="hljs-attr">anonymous</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">inputs</span>: [
        { <span class="hljs-attr">indexed</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"_msgSender"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"address"</span> },
        { <span class="hljs-attr">indexed</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"_recipientAddr"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"address"</span> },
        { <span class="hljs-attr">indexed</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"_swapID"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"bytes32"</span> },
        { <span class="hljs-attr">indexed</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"_randomNumberHash"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"bytes32"</span> },
        { <span class="hljs-attr">indexed</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"_timestamp"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"uint64"</span> },
        { <span class="hljs-attr">indexed</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"_bep2Addr"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"bytes20"</span> },
        { <span class="hljs-attr">indexed</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"_expireHeight"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"uint256"</span> },
        { <span class="hljs-attr">indexed</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"_outAmount"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"uint256"</span> },
        { <span class="hljs-attr">indexed</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"_bep2Amount"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"uint256"</span> }
      ],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"HTLT"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"event"</span>
    },
    {
      <span class="hljs-attr">anonymous</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">inputs</span>: [
        { <span class="hljs-attr">indexed</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"_msgSender"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"address"</span> },
        { <span class="hljs-attr">indexed</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"_recipientAddr"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"address"</span> },
        { <span class="hljs-attr">indexed</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"_swapID"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"bytes32"</span> },
        { <span class="hljs-attr">indexed</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"_randomNumberHash"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"bytes32"</span> }
      ],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"Refunded"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"event"</span>
    },
    {
      <span class="hljs-attr">anonymous</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">inputs</span>: [
        { <span class="hljs-attr">indexed</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"_msgSender"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"address"</span> },
        { <span class="hljs-attr">indexed</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"_recipientAddr"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"address"</span> },
        { <span class="hljs-attr">indexed</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"_swapID"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"bytes32"</span> },
        { <span class="hljs-attr">indexed</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"_randomNumberHash"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"bytes32"</span> },
        { <span class="hljs-attr">indexed</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"_randomNumber"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"bytes32"</span> }
      ],
      <span class="hljs-attr">name</span>: <span class="hljs-string">"Claimed"</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">"event"</span>
    }
  ],
  swapContractAddr
);

<span class="hljs-comment">//--------------------------------------------</span>
<span class="hljs-comment">//Step1 send htlt on Binance Chain</span>
<span class="hljs-comment">//--------------------------------------------</span>
<span class="hljs-keyword">const</span> randomNumber =
  <span class="hljs-string">"e8eae926261ab77d018202434791a335249b470246a7b02e28c3b2fb6ffad8f3"</span>;
<span class="hljs-keyword">const</span> timestamp = <span class="hljs-built_in">Math</span>.floor(<span class="hljs-built_in">Date</span>.now() / <span class="hljs-number">1000</span>);
<span class="hljs-keyword">const</span> randomNumberHash = calculateRandomNumberHash(
  randomNumber,
  timestamp
).toString(<span class="hljs-string">"hex"</span>);
<span class="hljs-keyword">const</span> heightSpan = <span class="hljs-number">10000</span>;
<span class="hljs-keyword">const</span> amount = [
  {
    <span class="hljs-attr">denom</span>: <span class="hljs-string">"PPC-00A"</span>,
    <span class="hljs-attr">amount</span>: <span class="hljs-number">100000000</span>
  }
];
<span class="hljs-keyword">const</span> expectedIncome = <span class="hljs-string">"9999990000:PPC"</span>; <span class="hljs-comment">//"9999990000:PPC", decimal is 10, deputy will deduct swap fee, the swap fee is 10000:PPC</span>

bnbClient.swap.HTLT(
  clientBnbWalletAddr,
  deputyBNBWalletAddr,
  clientEthWalletAddr,
  <span class="hljs-string">""</span>,
  randomNumberHash,
  timestamp,
  amount,
  expectedIncome,
  heightSpan,
  <span class="hljs-literal">true</span>
);
<span class="hljs-keyword">await</span> wait(<span class="hljs-number">1000</span>);

<span class="hljs-comment">//----------------------------------------------------------------------------</span>
<span class="hljs-comment">//Step2 query swap created by deputy on Ethereum and verify swap parameters</span>
<span class="hljs-comment">//----------------------------------------------------------------------------</span>
<span class="hljs-keyword">const</span> hexEncodingClientBNBaddr =
  <span class="hljs-string">"0x"</span> + crypto.decodeAddress(clientBnbWalletAddr).toString(<span class="hljs-string">"hex"</span>);
<span class="hljs-keyword">const</span> swapID = <span class="hljs-keyword">await</span> swapContract.methods
  .calSwapID(
    <span class="hljs-string">"0x"</span> + randomNumberHash,
    deputyEthWalletAddr,
    hexEncodingClientBNBaddr
  )
  .call();
<span class="hljs-built_in">console</span>.log(swapID);

<span class="hljs-keyword">let</span> openSwap = <span class="hljs-keyword">await</span> swapContract.methods.queryOpenSwap(swapID).call();
<span class="hljs-keyword">while</span> (
  openSwap._randomNumberHash ==
  <span class="hljs-string">"0x0000000000000000000000000000000000000000000000000000000000000000"</span>
) {
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Waiting for the atomic swap created by deputy"</span>);
  <span class="hljs-keyword">await</span> wait(<span class="hljs-number">5000</span>);
  openSwap = <span class="hljs-keyword">await</span> swapContract.methods.queryOpenSwap(swapID).call();
}
<span class="hljs-keyword">let</span> ethBlock = <span class="hljs-keyword">await</span> web3.eth.getBlock(<span class="hljs-string">"latest"</span>);
<span class="hljs-keyword">let</span> ethLatestHeight = ethBlock.number;
expect(openSwap._randomNumberHash).toBe(<span class="hljs-string">"0x"</span> + randomNumberHash);
expect(<span class="hljs-built_in">Number</span>(openSwap._timestamp)).toBe(timestamp);
expect(<span class="hljs-built_in">Number</span>(openSwap._outAmount)).toBe(<span class="hljs-number">9999990000</span>);
expect(openSwap._recipient).toBe(clientEthWalletAddr);
expect(<span class="hljs-built_in">Number</span>(openSwap._expireHeight)).toBeGreaterThan(
  <span class="hljs-built_in">Number</span>(ethLatestHeight) + <span class="hljs-number">20</span>
);

<span class="hljs-comment">//----------------------------------------------------------------------------</span>
<span class="hljs-comment">//Step3 claim on Ethereum</span>
<span class="hljs-comment">//----------------------------------------------------------------------------</span>
<span class="hljs-keyword">const</span> claimData = swapContract.methods
  .claim(swapID, <span class="hljs-string">"0x"</span> + randomNumber)
  .encodeABI();
<span class="hljs-keyword">let</span> nonce = <span class="hljs-keyword">await</span> web3.eth.getTransactionCount(clientEthWalletAddr, <span class="hljs-string">"pending"</span>);
<span class="hljs-keyword">let</span> gasPrice = <span class="hljs-keyword">await</span> web3.eth.getGasPrice();
<span class="hljs-keyword">let</span> gasLimit = <span class="hljs-number">3000000</span>;
<span class="hljs-keyword">let</span> rawTx = {
  <span class="hljs-attr">nonce</span>: web3.utils.toHex(nonce),
  <span class="hljs-attr">gasPrice</span>: web3.utils.toHex(gasPrice),
  <span class="hljs-attr">gasLimit</span>: web3.utils.toHex(gasLimit),
  <span class="hljs-attr">to</span>: swapContractAddr,
  <span class="hljs-attr">value</span>: <span class="hljs-string">"0x00"</span>,
  <span class="hljs-attr">data</span>: claimData
};
<span class="hljs-keyword">var</span> ethereumjs = <span class="hljs-built_in">require</span>(<span class="hljs-string">"ethereumjs-tx"</span>);
<span class="hljs-keyword">var</span> signTx = <span class="hljs-keyword">new</span> ethereumjs(rawTx);
signTx.sign(clientEthWalletKey);
<span class="hljs-keyword">var</span> serializedTx = signTx.serialize();
web3.eth
  .sendSignedTransaction(<span class="hljs-string">"0x"</span> + serializedTx.toString(<span class="hljs-string">"hex"</span>))
  .on(<span class="hljs-string">"receipt"</span>, <span class="hljs-built_in">console</span>.log);
<span class="hljs-keyword">await</span> wait(<span class="hljs-number">20000</span>);

<span class="hljs-comment">//----------------------------------------------------------------------------</span>
<span class="hljs-comment">//If step2 or step3 are failed and the expire height on Binance Chain is passed, try to send refundHTLT transaction on Binance Chain</span>
<span class="hljs-comment">//----------------------------------------------------------------------------</span>
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="swap-between-several-bep2-tokens"></a><a href="#swap-between-several-bep2-tokens" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Swap between Several BEP2 tokens</h3>
<p><img src="/docs-site/docs/assets/same-chain.png" alt="image-20190918193422062"></p>
<h3><a class="anchor" aria-hidden="true" id="swap-between-several-bep2-tokens-fails"></a><a href="#swap-between-several-bep2-tokens-fails" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Swap between Several BEP2 tokens fails</h3>
<p><img src="/docs-site/docs/assets/samechain-fail.png" alt="image-20190918193518929"></p>
</span></div></article></div><div class="docLastUpdate"><em>Last updated on 2/17/2020 by Daniel Onggunhao</em></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs-site/docs/anti-front-running"><span class="arrow-prev">← </span><span>Anti Front-Running</span></a><a class="docs-next button" href="/docs-site/docs/blockchain"><span>Blockchain Architecture</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#introduction">Introduction</a></li><li><a href="#commands">Commands</a><ul class="toc-headings"><li><a href="#hash-timer-locked-transfer">Hash Timer Locked Transfer</a></li><li><a href="#deposit-htlt">Deposit HTLT</a></li><li><a href="#claim-htlt">Claim HTLT</a></li><li><a href="#refund-htlt">Refund HTLT</a></li><li><a href="#query-atomic-swap">Query Atomic Swap</a></li><li><a href="#query-atomic-swap-id-by-recipient">Query Atomic Swap ID By Recipient</a></li><li><a href="#query-atomic-swap-id-by-creator">Query Atomic Swap ID By Creator</a></li></ul></li><li><a href="#fees">Fees</a></li><li><a href="#workflows">Workflows</a><ul class="toc-headings"><li><a href="#preparations">Preparations</a></li><li><a href="#testnet-deployment">Testnet Deployment</a></li><li><a href="#swap-tokens-from-ethereum-to-binance-chain">Swap Tokens from Ethereum to Binance Chain</a></li><li><a href="#swap-tokens-from-binance-chain-to-ethereum">Swap Tokens from Binance Chain to Ethereum</a></li><li><a href="#swap-between-several-bep2-tokens">Swap between Several BEP2 tokens</a></li><li><a href="#swap-between-several-bep2-tokens-fails">Swap between Several BEP2 tokens fails</a></li></ul></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/docs-site/" class="nav-home"><img src="/docs-site/img/logo.svg" alt="Developers" width="66" height="58"/></a><div><h5>Docs</h5><a href="/docs-site/docs/en/doc1.html">Getting Started (or other categories)</a><a href="/docs-site/docs/en/doc2.html">Guides (or other categories)</a><a href="/docs-site/docs/en/doc3.html">API Reference (or other categories)</a></div><div><h5>Community</h5><a href="/docs-site/en/users.html">User Showcase</a><a href="https://stackoverflow.com/questions/tagged/" target="_blank" rel="noreferrer noopener">Stack Overflow</a><a href="https://discordapp.com/">Project Chat</a><a href="https://twitter.com/" target="_blank" rel="noreferrer noopener">Twitter</a></div><div><h5>More</h5><a href="/docs-site/blog">Blog</a><a href="https://github.com/">GitHub</a><a class="github-button" data-icon="octicon-star" data-count-href="/facebook/docusaurus/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a></div></section><a href="https://opensource.facebook.com/" target="_blank" rel="noreferrer noopener" class="fbOpenSource"><img src="/docs-site/img/oss_logo.png" alt="Facebook Open Source" width="170" height="45"/></a><section class="copyright">Copyright © 2020 Binance</section></footer></div></body></html>